@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&display=swap');

  /* ===========================
     AeroShell — translucent black, amber accent
     =========================== */
  #works-console{
    --fg:#f3f4f6; --muted:#c7c8ce; --dim:#9aa1a9;
    --warn:#fbbf24; --err:#ef4444; --ok:#22c55e;
    --accent:#ffffff;                 /* amber */
    --aero-bg:rgba(0,0,0,.9);        /* BLACK, not gray */
    --aero-stroke:rgba(255,255,255,.02);
    --aero-blur:14px;
    --aero-shadow:0 30px 80px rgba(0,0,0,.55);
    --aero-glow:0 0 0 1px rgba(255,255,255,.05);
    --line:rgba(255,255,255,.08);
    --chip-bg:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    --chip-bd:rgba(255,255,255,.16);
    --chip-bg-h:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    --chip-ring:rgba(245,245,245,.38); /* amber ring */
    --radius:6px;                    /* 6px everywhere */
  }
#works-console{
    font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;
    --border-ctl: rgba(255,255,255,.18);
    --border-hover: rgba(245,158,11,.35);
  }
  /* Frame: translucent glass, blur, deep shadow (6px corners) */
  #works-console .wc-frame{
    color:var(--fg);
    background:var(--aero-bg);
    border:1px solid var(--aero-stroke);
    border-radius:var(--radius);
    box-shadow:var(--aero-shadow), var(--aero-glow) inset;
    -webkit-backdrop-filter:saturate(120%) blur(var(--aero-blur));
            backdrop-filter:saturate(120%) blur(var(--aero-blur));
    max-width:1100px; margin:20px auto; overflow:hidden;
  }

  /* Output */
  #works-console .wc-output{
    padding:18px 18px 8px; min-height:260px; max-height:70vh; overflow:auto; line-height:1.52;
  }
  #works-console .divider{height:0px; background:var(--line); margin:0px 0; opacity:.9}

  /* Input row */
  #works-console .wc-input{
    display:flex; align-items:center; gap:10px; padding:10px 14px 14px;
    border-top:1px solid var(--line);
    background:
      radial-gradient(80% 90% at 0% 0%, rgba(255,255,255,.05), transparent 25%),
      radial-gradient(80% 90% at 100% 0%, rgba(255,255,255,.03), transparent 25%);
  }
  #works-console .wc-prompt{color:var(--accent); font-weight:700; user-select:none}
  #works-console #wc-cmd{flex:1; font:inherit; color:var(--fg); background:transparent; border:none; outline:none; caret-color:var(--accent)}

  /* Lines + animated reveal */
  #works-console .line{white-space:pre-wrap; word-break:break-word; opacity:0; transform:translateY(2px); transition:opacity .16s ease-out, transform .16s ease-out}
  #works-console .line.in{opacity:1; transform:none}
  #works-console .line.dim{color:var(--dim)}
  #works-console .line.muted{color:var(--muted)}
  #works-console .line.warn{color:var(--warn)}
  #works-console .line.err{color:var(--err)}
  #works-console .line.ok{color:var(--ok)}
  #works-console .title{color:var(--title-fg); font-weight:800; letter-spacing:.2px}
  #works-console .cmd-echo .prompt{color:var(--accent); font-weight:700}
  #works-console .sp{display:inline-block; width:.4em}

  /* Work blocks (12px) */
  #works-console .row{margin:2px 0 12px}
  #works-console .blk{
    padding:12px 12px; border:1px solid var(--line); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    box-shadow:inset 0 1px rgba(255,255,255,.05);
  }
  #works-console .one{color:var(--muted)}

  /* Buttons (chips) — amber hover, 6px focus ring */
  #works-console .actions{margin-top:8px; display:flex; flex-wrap:wrap; gap:8px}
  #works-console .btn{
    position:relative; appearance:none; border:1px solid var(--chip-bd);
   background:var(--chip-bg); color:var(--btn-fg); border-radius:6px;
    padding:6px 6px; font:inherit; cursor:pointer; line-height:1.2;
    box-shadow:inset 0 1px rgba(255,255,255,.08), 0 1px 0 rgba(255,255,255,.03);
    transition:transform .12s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
  }
  #works-console .btn:hover{
    background:var(--chip-bg-h); transform:translateY(-1px);
    border-color:var(--border-hover); box-shadow:inset 0 1px rgba(255,255,255,.1), 0 0 6px rgba(245,158,11,.12);
  }
  #works-console .btn:active{transform:translateY(0)}
  #works-console .btn:focus-visible{outline:none; box-shadow:0 0 0 3px var(--chip-ring)}

  /* Scrollbar subtle */
  #works-console .wc-output::-webkit-scrollbar{height:10px;width:10px}
  #works-console .wc-output::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:10px}
  #works-console .wc-output::-webkit-scrollbar-track{background:transparent}

  /* Toast (6px) */
  #works-console .toast{
    position:sticky; bottom:6px; align-self:flex-start; margin-top:6px;
    display:inline-block; padding:6px 10px; border-radius:var(--radius);
    background:rgba(0,0,0,.65); border:1px solid var(--aero-stroke);
    -webkit-backdrop-filter:saturate(120%) blur(10px); backdrop-filter:saturate(120%) blur(10px);
    box-shadow:0 10px 30px rgba(0,0,0,.45);
    font-size:.92em; color:var(--warn);
    opacity:0; transform:translateY(4px); transition:opacity .18s ease, transform .18s ease;
  }
  #works-console .toast.in{opacity:1; transform:none}

  /* HUD: sticky status + progress (6px corners) */
  #works-console .wc-hud{
    position: sticky; bottom: 0; margin: 8px 6px 6px;
    padding: 8px 10px; border-radius: var(--radius);
    background: rgba(255,255,255,.04);
    border: 1px solid var(--line);
    box-shadow: inset 0 1px rgba(255,255,255,.06);
    font-variant-numeric: tabular-nums;
container-type: inline-size; /* enable container queries for responsive hiding */
 }
  
/* Hide the HUD container until it has children */
  #works-console .wc-hud:empty{ display:none; }
   #works-console .wc-hud .row{display:flex; gap:10px; align-items:center; flex-wrap:nowrap; margin:0; white-space:nowrap}

  #works-console .wc-hud .tag{padding:2px 8px; border-radius:6px; border:1px solid var(--chip-bd); background:var(--chip-bg)}
/* Fixed-width “Now playing …” pill with marquee */
#works-console .wc-hud .tag-now{
  display:inline-block;
  max-width:100%;          /* safety */
  overflow:hidden;
  white-space:nowrap;
  vertical-align:middle;
}
#works-console .wc-hud .tag-now .scroll{
  display:inline-flex; align-items:center; gap:1.25em;
  will-change: transform;
}
#works-console .wc-hud .tag-now .txt,
#works-console .wc-hud .tag-now .dup{ white-space:nowrap; }
#works-console .wc-hud .tag-now.is-marquee .scroll{
  animation: wc-marquee 16s linear infinite;
}
@keyframes wc-marquee{
  from{ transform: translateX(0); }
  to  { transform: translateX(-50%); } /* two copies → slide by one copy width */
}
 #works-console .meter{position:relative; width:160px; height:6px; border-radius:6px; background:rgba(255,255,255,.10); overflow:hidden; flex:0 0 160px}
  #works-console .meter > span{position:absolute; inset:0 100% 0 0; background:linear-gradient(90deg, rgba(255,255,255,.75), rgba(255,255,255,.35)); border-radius:6px}
  #works-console .wc-hud .soft{color:var(--muted)}
/* HUD actions */
#works-console .hud-actions{margin-left:auto; display:flex; gap:8px; align-items:center}
#works-console .hud-btn{
  padding:6px 6px;         /* a bit more vertical padding */
  font-size:.92em;
  line-height:1.15;
  border-radius:6px;       /* ensure 6px */
}
/* HUD responsive: shrink then hide the progress bar to keep one line */
@container (max-width: 920px){
  #works-console .meter{ width:120px; flex-basis:120px; }
}
@container (max-width: 780px){
  #works-console .meter{ width:80px; flex-basis:80px; }
}
@container (max-width: 640px){
  #works-console .meter{ display:none; }
  #works-console .wc-hud .row{ gap:8px; } /* tighten spacing a touch */
}
@container (max-width: 520px){
  #works-console .wc-hud .row{ gap:6px; } /* smallest screens */
}


/* ===== One-page fit: Title • Console • Breadcrumbs ===== */
html, body { height:100%; overflow:hidden; } /* keep page from scrolling */
#works-group { overflow-x: clip; }
#works-group.wc-group{
  display:grid; grid-template-rows:auto 1fr auto;
  height:100dvh; min-height:100svh; overflow:hidden;
  padding:clamp(8px, 1.6vw, 16px);
  box-sizing:border-box;
  font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

/* Make sure the console inherits IBM Plex Mono */
#works-console{ font-family: inherit !important; }
/* Console banner/title color token (overridden per theme below) */
#works-console{ --title-fg:#fff; }



/* Flex the console frame so output fills available space (no 70vh push) */
#works-console .wc-frame{ display:flex; flex-direction:column; margin:clamp(8px,1.5vh,20px) auto; }
/* In split view, zero the vertical margin so both columns align at the top */
#works-console .wc-split > .wc-frame{ margin:0 auto !important; }
#works-console .wc-split > .wc-pdfpane{ margin:0 !important; }
#works-console .wc-output{ flex:1 1 auto; max-height:none; }  /* override 70vh */

/* Titlebar */
.wc-titlebar{ position:relative; top:0; padding:4px 6px 8px; background:transparent; }
.wc-titlebar .wt-wrap{ max-width:1100px; margin:0 auto; color:#f3f4f6; opacity:1; transform:none; } /* default visible */
.wc-titlebar .wt-title{ margin:0; font-weight:700; letter-spacing:.2px; font-size:clamp(18px,2.3vw,28px); line-height:1.15; }
.wc-titlebar .wt-subtitle{ margin:.15em 0 0; color:#c7c8ce; font-weight:400; font-size:clamp(6px,1.4vw,16px); display:flex; gap:.6em; align-items:baseline; flex-wrap:wrap; }
.wc-titlebar .wt-updated{
  display:inline-flex; align-items:center; gap:.4em;
  padding:.15em .55em; border-radius:6px;
  border:1px solid rgba(255,255,255,.16);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  color:#fbbf24;
}
/* Theme toggle: top-right, safe-area aware */
.wc-titlebar .wt-wrap{ position:relative; }
#wc-theme-toggle.wc-theme{
  position:absolute; top:0; right:max(0px, env(safe-area-inset-right));
  display:inline-grid; place-items:center;
  width:36px; height:36px; border-radius:6px;
  border:1px solid rgba(0,0,0,.18);
  background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65));
  color:#0f0f0f; cursor:pointer; padding:0; line-height:1; z-index:2;
  transition:transform .12s ease, box-shadow .2s ease, border-color .2s ease;
}
#wc-theme-toggle.wc-theme:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.12); }
#wc-theme-toggle svg{ width:20px; height:20px; display:block; }
/* Show the *target* icon: if currently dark, show Sun (switch to light); if light, show Moon */
#works-group[data-theme="dark"]  .wc-ico-moon{ display:none; }
#works-group[data-theme="light"] .wc-ico-sun{  display:none; }
/* Breadcrumbs pinned inside the group bottom */
.wc-crumbs{ align-self:end; background:transparent; padding:8px 6px 2px; }
.wc-crumbs .wb-list{ max-width:1100px; margin:0 auto; padding:0; list-style:none; display:flex; align-items:center; gap:.6em; flex-wrap:wrap; }
.wc-crumbs .wb-item{ display:flex; align-items:center; }
.wc-crumbs .wb-sep{ color:rgba(255,255,255,.45); }
.wc-crumbs .wb-link{
  display:inline-flex; align-items:center; gap:.45em;
  color:#f3f4f6; text-decoration:none; position:relative; padding:.1em .25em;
}
.wc-crumbs .wb-link::after{
  content:""; position:absolute; left:.25em; right:.25em; bottom:0;
  height:1px; background:linear-gradient(90deg, rgba(255,255,255,.7), rgba(255,255,255,.3));
  transform:scaleX(0); transform-origin:left; transition:transform .22s ease;
}
.wc-crumbs .wb-link:hover::after{ transform:scaleX(1); }
.wc-crumbs .wb-txt{ font-size:clamp(6px,1.3vw,15px); }

/* Safety on very short viewports */
@media (max-height:600px){
  #works-console .wc-hud{ position:static; margin-top:8px; }
}
/* Title: readable on white, compact */
.wc-titlebar{ padding: 2px 0 6px; background: transparent; }
.wc-titlebar .wt-wrap{ 
  max-width:1100px; margin:0 auto;
  color:#000000;                 /* dark text for white bg */
  opacity:1; transform:none;
  font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}
.wc-titlebar .wt-title{
  margin:0; font-weight:700; letter-spacing:.2px;
  font-size:clamp(16px, 1.9vw, 22px);  /* tighter */
  line-height:1.15;
font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;

}
.wc-titlebar .wt-subtitle{
  margin:.2em 0 0; color:#475569;      /* slate-ish */
  font-weight:400; 
  font-size:clamp(11px, 1.2vw, 14px);  /* smaller */
  display:flex; gap:.6em; align-items:baseline; flex-wrap:wrap;
}
.wc-titlebar .wt-updated{
  display:inline-flex; align-items:center; gap:.4em;
  padding:.05em .45em; border-radius:6px;
  border:1px solid rgba(0,0,0,.12);     /* subtle on white */
  background:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  color:#b45309;                        /* amber-ish text */
}
/* Shrink the console height (cap it) */
#works-console .wc-split{
  height: clamp(560px, 70vh, 1200px);     /* drives equal column height */
}
#works-console .wc-frame{
  height: 100% !important;                /* match split container */
  min-height: 120px !important;
  max-height: none !important;
  display: flex; flex-direction: column;
height: 100%;    
}
#works-console .wc-output{
  flex: 1 1 auto !important;
  min-height: 0 !important;
  max-height: none !important;
}
/* ——— Titlebar: force display, font, pure black ——— */
#works-group .wc-titlebar{
  display:block !important;
  position:relative;
  z-index:1;
  background:transparent;
  padding: 2px 0 6px;
font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}
#works-group .wc-titlebar .wt-wrap{
  max-width:1100px; margin:0 auto;
  font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace !important;
  color:#000000 !important;
}
#works-group .wc-titlebar .wt-title{
  margin:0;
  color:#000000 !important;
  font-weight:700;
  letter-spacing:.01em;
  font-size:clamp(18px, 1.8vw, 22px);
  line-height:1.15;
font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;

}
#works-group .wc-titlebar .wt-subtitle{
  margin:.2em 0 0;
  color:#000000 !important;  /* minimal, pure black per spec */
  font-weight:400;
  font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;

  font-size:clamp(11px, 1.2vw, 14px);
  display:flex; gap:.6em; align-items:baseline; flex-wrap:wrap;
}
#works-group .wc-titlebar .wt-updated{
  display:inline-flex; align-items:center; gap:.4em;
  padding:.05em .45em; border-radius:6px;
  border:1px solid rgba(0,0,0,.12);
  background:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  color:#000000; /* keep black, still minimal on white */
font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}
/* ===== Bottom: Orbit + Chips (64px row) ===== */
.wc-crumbs{
  align-self:end;
  background:transparent;
  min-height:64px; height:64px; /* fixed target */
  display:flex; align-items:center; justify-content:center;
  font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  color:#0f0f0f;
  padding:4px 6px;
}
.wc-crumbs .wb-wrap{
  width:100%; max-width:1100px;
  display:grid; grid-template-columns:auto 1fr auto;
  gap:6px; align-items:center;
  margin:0 auto;
}



/* Chip buttons */
.wc-crumbs .wb-actions{ display:flex; gap:10px; justify-content:center; align-items:center; }
.wc-crumbs .wb-chip{
  display:inline-flex; align-items:center; justify-content:center;
  padding:8px 14px; border-radius:6px;
  border:1px solid var(--border-ctl);
  background:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  text-decoration:none; color:#0f0f0f;
  font-size:clamp(6px,1.2vw,14px); line-height:1; letter-spacing:.005em;
  position:relative; transition:letter-spacing .2s ease, transform .15s ease, border-color .2s ease, background .2s ease;
}
.wc-crumbs .wb-chip::after{
  content:""; position:absolute; left:10px; right:10px; bottom:6px; height:1px;
  background:linear-gradient(90deg, rgba(0,0,0,.7), rgba(0,0,0,.35));
  transform:scaleX(0); transform-origin:left; transition:transform .22s ease;
}
.wc-crumbs .wb-chip:hover{ letter-spacing:.03em; transform:translateY(-1px); border-color:var(--border-hover); }
.wc-crumbs .wb-chip:hover::after{ transform:scaleX(1); }

/* Microcopy (right) */
.wc-crumbs .wb-micro{
  color:#0f0f0f; opacity:.65; font-size:clamp(11px,1.05vw,13px);
  user-select:none; white-space:nowrap;
}

/* ——— Aperture Iris (hover-only, subtle) ——— */
.wc-crumbs .wb-orbit{ width:32px; height:32px; display:block; }
.wc-crumbs .wb-orbit .iris-rot{ transform-origin:32px 32px; }
.wc-crumbs .wb-orbit .iris-pupil{
  transform-origin:32px 32px;
  transition: transform .35s ease;
}
.wc-crumbs .wb-orbit .blade{
  stroke-dasharray:4 8;
}

/* Hover animations: micro-rotation + dash shimmer + slight pupil dilation */
.wc-crumbs:hover .wb-orbit .iris-rot{ animation: iris-tilt 2.6s ease-in-out infinite; }
.wc-crumbs:hover .wb-orbit .blade{ animation: iris-dash 1.8s linear infinite; }
.wc-crumbs:hover .wb-orbit .iris-pupil{ transform: scale(1.12); }

@keyframes iris-tilt{
  0%{   transform: rotate(-6deg); }
  50%{  transform: rotate(6deg);  }
  100%{ transform: rotate(-6deg); }
}
@keyframes iris-dash{
  to { stroke-dashoffset: -20; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .wc-crumbs:hover .wb-orbit .iris-rot,
  .wc-crumbs:hover .wb-orbit .blade,
  .wc-crumbs:hover .wb-orbit .iris-pupil{
    animation:none !important;
    transform:none !important;
  }
}

/* Right PDF pane */
#works-console .wc-pdfpane{
  position: relative;
  border: 1px solid var(--border-ctl);
  background: #fff;
  border-radius: 6px;
  box-shadow: 0 30px 80px rgba(0,0,0,.12);

  /* slide-in animation */
overflow: hidden;
  display:flex; flex-direction:column;   /* bar + iframe stack */
  min-height:0;                          /* allow children to size */
  transform: translateX(12px);
  opacity: 0;
  pointer-events: none;
  transition: transform .22s ease, opacity .22s ease;
}

/* Activate pane when split is on */
#works-console.has-pdf .wc-pdfpane{
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

/* PDF top bar */
#works-console .wc-pdfbar{
  display:flex; align-items:center; gap:10px;
  padding:8px 10px; border-bottom:1px solid var(--border-ctl);
  background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.01));
  font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}
#works-console .wc-pdf-title{
   font-size: clamp(14px, 1.6vw, 18px);
   line-height: 1.2;
   letter-spacing: .01em;
   color:#0f0f0f; opacity:.9;
   white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
   flex: 1 1 auto; min-width: 0; /* let it claim space and keep ellipsis */
}
#works-console .wc-pdf-title{ font-weight: 600; }
#works-console .wc-pdf-close{
  margin-left:auto;
  appearance:none; border:1px solid var(--border-ctl);
  background:linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,.015));
  color:#0f0f0f; padding:6px 10px; border-radius:10px; cursor:pointer; line-height:1;
}

/* PDF iframe fills the pane */
#works-console .wc-pdf-frame{
  display:block; width:100%;
  flex: 1 1 auto;                          /* fill remaining height */
  height: auto !important;                 /* override calc() */
  border:0; background:#fff;
}

/* Keep console frame flexible (unchanged intent) */
#works-console .wc-frame{
  display:flex; flex-direction:column;
}

/* Mobile: pane overlays the console (still only within middle section) */
@media (max-width: 900px){
  #works-console.has-pdf .wc-split{
    grid-template-columns: 1fr;   /* keep one column */
    position: relative;
  }
  #works-console .wc-pdfpane{
    position:absolute; inset:0 0 0 auto; width: min(92vw, 720px);
    border-left: 1px solid rgba(0,0,0,.12);
    border-top-left-radius: 6px; border-bottom-left-radius: 6px;
    box-shadow: -24px 0 60px rgba(0,0,0,.18);
    transform: translateX(6%);
  }
}

/* Page grid: header • middle • footer */
#works-group.wc-group{
  /* was: grid-template-rows: auto 1fr auto; */
  grid-template-rows: auto minmax(0,1fr) auto;  /* <-- prevents middle from forcing overflow */
}

/* Let the middle section be shrinkable within its grid row */
#works-console{
  min-height: 0;   /* <-- critical so its internal overflow doesn't hide the footer */
}

/* Inside the console, allow children to shrink instead of overgrowing */
#works-console .wc-frame{
  min-height: 0;
  height: 100%;    /* fill only the allocated grid row */
}

/* The scrollable output remains the only scroller */
#works-console .wc-output{
  flex: 1 1 auto;
  min-height: 0;   /* ensures the internal scroller wins */
  overflow: auto;
}
/* Split container (middle only) */
#works-console .wc-split{
   display: grid;
   /* keep total width ≤ 100%: first column gets the leftover space */
   grid-template-columns:
     minmax(0, calc(100% - var(--pdfW, 0px) - var(--g)))
     minmax(0, var(--pdfW, 0px));
   gap: var(--g);
   align-items: stretch;
min-height: 0;    
   padding-right: max(var(--edge-pad), env(safe-area-inset-right));
   box-sizing: border-box;
 }


/* Animate via CSS vars (works across modern engines) */
#works-console{
   --pdfW: 0px;                 /* closed */
   --pdfTrans: 10px;
   --pdfOpacity: 0;
   --edge-pad: clamp(10px, 1.6vw, 18px);  /* right inset for PDF column */
--g: clamp(8px, 1.2vw, 14px);          /* unified grid gap token */
 }
#works-console.has-pdf{
   /* target PDF width; overall grid will compute leftover for col 1 */
   --pdfW: clamp(320px, 44vw, 720px);
   --pdfTrans: 0px;
   --pdfOpacity: 1;
 }

/* Pane itself animates width + slide + fade */
#works-console .wc-pdfpane{
  width: var(--pdfW);
  max-width: var(--pdfW);
  transform: translateX(var(--pdfTrans));
  opacity: var(--pdfOpacity);
  pointer-events: var(--pdfPanePE, none);
  border: 1px solid var(--border-ctl);
  background: #fff;
  border-radius: 6px;
  box-shadow: 0 30px 80px rgba(0,0,0,.12);
  overflow: hidden;
  transition:
    width .28s cubic-bezier(.28,.01,.2,1),
    max-width .28s cubic-bezier(.28,.01,.2,1),
    transform .28s cubic-bezier(.28,.01,.2,1),
    opacity .24s ease;
}
#works-console.has-pdf .wc-pdfpane{
  --pdfPanePE: auto;
}

/* Top bar and iframe unchanged, but ensure the iframe fills */
#works-console .wc-pdfbar{
  display:flex; align-items:center; gap:10px;
flex:0 0 auto; 
  padding:8px 10px; border-bottom:1px solid var(--border-ctl);
  background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.01));
  font-family:'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}
#works-console .wc-pdf-frame{
  display:block; width:100%;
  flex:1 1 auto;                         /* fill remaining height */
  min-height:0;                          /* required for flex children */
  height:100% !important;                /* override any calc() leftovers */
  border:0; background:#fff;
}

/* Mobile: overlay the pane on top of the console, still only in middle */
@media (max-width: 900px){
  #works-console .wc-split{ position: relative; }
  #works-console .wc-pdfpane{
    position: absolute; inset: 0 0 0 auto;
    width: min(92vw, 720px);
    max-width: min(92vw, 720px);
    border-left: 1px solid var(--border-ctl);
    border-top-left-radius: 6px; border-bottom-left-radius: 6px;
    box-shadow: -24px 0 60px rgba(0,0,0,.18);
  }
}

/* ===== Mobile usability overrides (no desktop regressions) ===== */
@media (max-width: 900px){
  /* Let the PAGE scroll on mobile (was locked). */
  html, body{
    height:auto !important;
    min-height:100% !important;
    overflow:auto !important;
  }

  /* Drop one-page hard fit; allow natural height. */
  #works-group.wc-group{
    height:auto !important;
    min-height:100svh !important; /* fallback-safe for iOS */
    grid-template-rows:auto auto auto !important;
  }

  /* Console can size naturally; child scroller remains smooth. */
  #works-console{
    min-height:auto !important;
  }
  #works-console .wc-frame{
    height:auto !important;
    max-height:none !important;
  }

  /* Smooth, momentum scrolling inside the log on iOS. */
  #works-console .wc-output{
    max-height:none !important;
    -webkit-overflow-scrolling: touch;
  }

  /* Keep HUD from covering the input on small screens. */
  #works-console .wc-hud{
    position:static !important;
    margin-top:8px !important;
  }

  /* Give the input some breathing room above the iOS home bar. */
  #works-console .wc-input{
    padding-bottom: max(14px, env(safe-area-inset-bottom)) !important;
  }
}

/* Prefer dynamic viewport when supported, still scoped to mobile. */
@supports (height: 100dvh){
  @media (max-width: 900px){
    #works-group.wc-group{ min-height:100dvh !important; }
  }
}
/* Phone fixes: 1) pane fits fully in viewport, 2) overlay/shadow goes full-bleed */
@media (max-width: 900px){
  /* 1) Make the PDF pane fit cleanly inside the viewport (no right clip). */
  #works-console .wc-pdfpane{
    position: absolute;                 /* keep it scoped to the middle section */
    left: max(6px, env(safe-area-inset-left)) !important;
    right: max(6px, env(safe-area-inset-right)) !important;
    width: auto !important;             /* fill between left/right */
    max-width: none !important;
    transform: none !important;         /* remove the 6% slide that caused clipping */
  }

  /* Let shadows bleed past the group's padding on mobile. */
  #works-group.wc-group{
    overflow: visible !important;
  }

  /* 2) Full-bleed background/shadow while the PDF pane is open. */
  #works-console.has-pdf::before{
    content: "";
    position: fixed;                    /* extend to viewport edges (beyond the group inset) */
    inset: 0;
    pointer-events: none;
    z-index: 0;
    /* soft edge darkening; tweak strength if desired */
    background: radial-gradient(120% 100% at 50% 10%,
                 rgba(0,0,0,.20), rgba(0,0,0,.12) 35%, transparent 65%);
  }
  #works-console .wc-split{ position: relative; z-index: 1; }
}
/* Global hint for native controls */
#works-group{ color-scheme: light dark; }

/* ——— Toggle button ——— */
#wc-theme-toggle.wc-theme{
  position:absolute; top: max(8px, calc(env(safe-area-inset-top) + 4px));
  right:max(8px, calc(env(safe-area-inset-right) + 4px));
  z-index:2;
  display:inline-grid; place-items:center;
  width:34px; height:34px; border-radius:10px;
  padding:0; cursor:pointer;
  transition: transform .12s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
#wc-theme-toggle.wc-theme:active{ transform: translateY(0); }
#wc-theme-toggle .wc-theme-ico{ display:block; }

/* Dark look for toggle */
#works-group[data-theme="dark"] #wc-theme-toggle{
  background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  border:1px solid var(--border-ctl);
  color:#0f0f0f;
  box-shadow: inset 0 1px rgba(255,255,255,.6);
}
#works-group[data-theme="dark"] #wc-theme-toggle:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(0,0,0,.24); }
/* Light look for toggle */
#works-group[data-theme="light"] #wc-theme-toggle{
  background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  border:1px solid var(--border-ctl);
  color:#0f0f0f;
  box-shadow: inset 0 1px rgba(255,255,255,.6);
}
#works-group[data-theme="light"] #wc-theme-toggle:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(0,0,0,.24); }

/* ——— THEME TOKEN MAPS ——— */
/* Dark (current AeroShell defaults) */
#works-group[data-theme="dark"] #works-console{
  --fg:#f3f4f6; --muted:#c7c8ce; --dim:#9aa1a9;
  --warn:#fbbf24; --err:#ef4444; --ok:#22c55e;
  --accent:#ffffff;
  --aero-bg:rgba(0,0,0,.9);
  --aero-stroke:rgba(255,255,255,.02);
  --aero-blur:14px;
  --aero-shadow:0 30px 80px rgba(0,0,0,.55);
  --aero-glow:0 0 0 1px rgba(255,255,255,.05);
  --line:rgba(255,255,255,.08);
  --chip-bg:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  --chip-bd:rgba(255,255,255,.16);
  --chip-bg-h:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.025));
  --chip-ring:rgba(245,245,245,.38);
--btn-fg:#ffffff;
}

/* Light (paper) */
#works-group[data-theme="light"] #works-console{
--border-ctl: rgba(0,0,0,.22);       /* default border = dark gray/black */
 --border-hover: rgba(255,25,25,.55); /* hover accent = red */
  --fg:#0f172a; --muted:#334155; --dim:#475569;
  --warn:#b45309; --err:#b91c1c; --ok:#15803d;
  --accent:#0f0f0f;
  --aero-bg:rgba(255,255,255,.88);
  --aero-stroke:rgba(0,0,0,.06);
  --aero-blur:6px;
  --aero-shadow:0 30px 80px rgba(0,0,0,.12);
  --aero-glow:0 0 0 1px rgba(0,0,0,.04);
  --line:rgba(0,0,0,.10);
  --chip-bg:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  --chip-bd: var(--border-ctl);        /* chips/buttons follow spec */
  --chip-bg-h:linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.02));
  --chip-ring:rgba(0,0,0,.28);
--btn-fg:#0f0f0f;
}

/* Titlebar + breadcrumbs color overrides for DARK (light already covered by existing rules) */
#works-group[data-theme="dark"] .wc-titlebar .wt-wrap{ color:#000000 !important; }
#works-group[data-theme="dark"] .wc-titlebar .wt-title{ color:#000000 !important; }
#works-group[data-theme="dark"] .wc-titlebar .wt-subtitle{ color:#000000 !important; }
#works-group[data-theme="dark"] .wc-titlebar .wt-updated{
  border-color:rgba(0,0,0,.12) !important;
  background:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015)) !important;
  color:#000000 !important;
}

/* Breadcrumbs + chips */
#works-group[data-theme="dark"] .wc-crumbs{ color:#0f0f0f; }
#works-group[data-theme="dark"] .wc-crumbs .wb-micro{ color:#0f0f0f; opacity:.65; }
#works-group .wc-crumbs .wb-actions .wb-chip{
  border:1px solid var(--border-ctl);
  background:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  color:#0f0f0f;
}
#works-group[data-theme="dark"] .wc-crumbs .wb-chip::after{
  background:linear-gradient(90deg, rgba(0,0,0,.7), rgba(0,0,0,.35));
}
#works-group[data-theme="dark"] .wc-crumbs .wb-orbit g{ stroke:#0f0f0f !important; }

/* PDF split-pane chrome themes */
#works-group[data-theme="dark"] #works-console .wc-pdfpane{
  border-color: rgba(255,255,255,.12);
  background: #0b0b0b;
  box-shadow: 0 30px 80px rgba(0,0,0,.55);
}
#works-group[data-theme="dark"] #works-console .wc-pdfbar{
  border-bottom:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
}
#works-group[data-theme="dark"] #works-console .wc-pdf-title{ color:#f3f4f6; opacity:.85; }
#works-group[data-theme="dark"] #works-console .wc-pdf-close{
  border:1px solid rgba(255,255,255,.18);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  color:#fff;
}

/* Respect reduced motion for icon flourish (none used beyond existing) */
@media (prefers-reduced-motion: reduce){
  #wc-theme-toggle{ transition:none !important; }
}
#works-console{ color-scheme: light dark; }
/* Light theme: console title reads as black on light surfaces */
#works-group[data-theme="light"] #works-console{ --title-fg:#0f0f0f; }
/* === THEME MAPS (no Auto) === */

#works-group[data-theme="light"] #works-console{
--border-ctl: rgba(0,0,0,.22);
 --border-hover: rgba(255,25,25,.55); /* red only on hover */
  --fg:#0f172a; --muted:#475569; --dim:#64748b;
  --warn:#b45309; --err:#b91c1c; --ok:#166534;
  --accent:#0f0f0f;
  --aero-bg:rgba(255,255,255,.96);
  --aero-stroke:rgba(0,0,0,.10);
  --aero-shadow:0 20px 60px rgba(0,0,0,.12);
  --aero-glow:0 0 0 1px rgba(0,0,0,.03);
  --line:rgba(0,0,0,.12);
  --chip-bg:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  --chip-bd: var(--border-ctl);        /* ← red in light */
  --chip-bg-h:linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,.02));
  --chip-ring:rgba(0,0,0,.28);
  --title-fg:#0f0f0f;
}
#works-group[data-theme="dark"] #works-console{
--border-hover: var(--border-ctl);
--border-ctl: rgba(255,255,255,.55); /* ← dark mode border color */
  /* keep your existing dark tokens, but make sure title remains readable per your pec */
 --title-fg:#fff; /* (if you want black in dark, change to #0f0f0f) */
  --chip-bd: var(--border-ctl);        /* chips/buttons follow spec */
}

/* Title bar badge should look the same in both themes (per spec) */
#works-group .wc-titlebar .wt-updated{
  border-color: var(--border-ctl) !important;
  background:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));
  color:#0f0f0f;
}

/* Footer stays visible in both themes */
#works-group[data-theme="dark"] .wc-crumbs,
#works-group[data-theme="dark"] .wc-crumbs .wb-micro,
#works-group[data-theme="dark"] .wc-crumbs .wb-chip{ color:#0f0f0f; }
/* ===== Size preset: Large ===== */
#works-group[data-size="lg"]{
  /* a bit more outer breathing room */
  padding: clamp(12px, 2vw, 24px);
}

/* widen all primary wrappers */
#works-group[data-size="lg"] .wc-titlebar .wt-wrap,
#works-group[data-size="lg"] #works-console .wc-frame,
#works-group[data-size="lg"] .wc-crumbs .wb-wrap{
  max-width: 1280px;
}

/* bump global console type slightly */
#works-group[data-size="lg"] #works-console{
  font-size: 16px;
}

/* title/subtitle scale (keeps your IBM Plex Mono) */
#works-group[data-size="lg"] .wc-titlebar .wt-title{
  font-size: clamp(20px, 2.4vw, 30px);
}
#works-group[data-size="lg"] .wc-titlebar .wt-subtitle{
  font-size: clamp(12px, 1.3vw, 16px);
}

/* console frame: a touch taller */
#works-group[data-size="lg"] #works-console .wc-split{
  height: clamp(620px, 74vh, 1400px) !important;
}

/* PDF split width a bit roomier */
#works-group[data-size="lg"] #works-console.has-pdf{
  --pdfW: clamp(360px, 50vw, 860px);
}
/* === Fix: keep theme toggle pinned to top-right, independent of title width === */
#works-group #wc-theme-toggle {
  position: fixed !important;
  top: max(8px, calc(env(safe-area-inset-top) + 6px)) !important;
  right: max(8px, calc(env(safe-area-inset-right) + 6px)) !important;
  z-index: 1000 !important;
}
.wc-crumbs .wb-brand{
  display:flex;
  flex-direction:row;      /* one line */
  align-items:center;      /* vertical align */
  gap:8px;                 /* space between aperture and badge */
  white-space:nowrap;      /* prevent wrapping */
}
.wc-crumbs .wb-badge{ line-height:0; }   /* remove inline-gap */
.wc-crumbs .wb-badge img{
  display:block;
  height:18px;                 /* compact, matches icon scale */
}
@media (max-width: 600px){
  .wc-crumbs .wb-badge img{ height:16px; }
}
