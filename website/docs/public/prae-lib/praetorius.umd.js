(function(M,L){typeof exports=="object"&&typeof module<"u"?L(exports):typeof define=="function"&&define.amd?define(["exports"],L):(M=typeof globalThis<"u"?globalThis:M||self,L(M.PRAE={}))})(this,(function(M){"use strict";const L=`<!-- ===== GROUP WRAPPER: Title • Console • Breadcrumbs (one-page fit) ===== -->
 <section id="works-group" class="wc-group" aria-label="Seb Suarez Works List" data-theme="dark" data-size="lg">
  <!-- Title (stacked, minimal, mono) -->
  <header id="works-title" class="wc-titlebar" aria-label="Page Title">
    <div class="wt-wrap">
<!-- Theme toggle -->
    <button id="wc-theme-toggle" class="wc-theme" type="button" role="switch" aria-checked="false" aria-label="Toggle theme" title="Toggle theme">
      <!-- Sun (for switching to Light) -->
      <span class="wc-ico wc-ico-sun" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd" />
        </svg>
      </span>
      <!-- Moon (for switching to Dark) -->
      <span class="wc-ico wc-ico-moon" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
        </svg>
      </span>
    </button>
      <h1 class="wt-title">Seb Suarez, Works List</h1>
      <p class="wt-subtitle">
        Selected works with cues &amp; notes
        <span class="wt-updated" aria-label="Last updated">Updated&nbsp;Nov&nbsp;3</span>
      </p>
    </div>
  </header>


<!-- Works List — Single-Page CLI Console (AeroShell: translucent black + amber) -->
<section id="works-console" aria-label="Works List Console">
<div class="wc-split"> 
  <div class="wc-frame">
    <div class="wc-output" aria-live="polite"></div>
    <!-- HUD: sticky status + progress -->
    <div class="wc-hud" aria-live="polite" aria-atomic="true"></div>
    <form class="wc-input" autocomplete="off" spellcheck="false">
      <label class="wc-prompt" aria-hidden="true">$</label>
      <input id="wc-cmd" type="text" inputmode="latin" autocapitalize="off" autocomplete="off" aria-label="Console command" />
    </form>
  </div>
<!-- Right PDF pane (split view; not a modal) -->
    <aside class="wc-pdfpane" aria-label="Score PDF" aria-hidden="true">
      <header class="wc-pdfbar">
        <button type="button" class="wc-pdf-close" aria-label="Close PDF">✕</button>
        <div class="wc-pdf-title" aria-live="polite"></div>
      </header>
      <iframe class="wc-pdf-frame" title="Score PDF" loading="lazy"
         allow="autoplay; fullscreen" referrerpolicy="no-referrer"></iframe>
    </aside>
  </div>

  <!-- Hidden native audio (lazy: src set on first play). If you keep Google Drive "view" links,
       the script will auto-rewrite them to direct "uc?export=download&id=..." streams. -->
  <audio id="wc-a1" preload="none" playsinline data-audio="https://cdn.jsdelivr.net/gh/cbassuarez/website-blog/audio/SSS_soundnoisemusic_audio.mp3"></audio>
  <audio id="wc-a2" preload="none" playsinline data-audio="https://cdn.jsdelivr.net/gh/cbassuarez/website-blog/audio/luxnova.mp3"></audio>
  <audio id="wc-a3" preload="none" playsinline data-audio="https://cdn.jsdelivr.net/gh/cbassuarez/website-blog/audio/amplifications.mp3"></audio>
</section>



 



  <!-- ↑↑↑ KEEP YOUR EXISTING CONSOLE BLOCK VERBATIM HERE ↑↑↑ -->
  <!-- Breadcrumbs (inline, transparent, bottom) -->
  <nav id="works-breadcrumbs" class="wc-crumbs" aria-label="Breadcrumb">
  <div class="wb-wrap" role="group" aria-label="Navigation and meta">
    <!-- SVG orbit: hover-only spin; subtle; inline, no canvas -->
   <div class="wb-brand">
      <svg class="wb-orbit" viewBox="0 0 64 64" width="32" height="32" aria-hidden="true" focusable="false">
        <g class="iris-rot" stroke="#0f0f0f" stroke-width="1.4" fill="none"
           stroke-linecap="round" stroke-linejoin="round" vector-effect="non-scaling-stroke">
          <circle class="iris-ring" cx="32" cy="32" r="20"/>
          <circle class="iris-pupil" cx="32" cy="32" r="5"/>
          <g class="iris-blades" shape-rendering="geometricPrecision">
            <path class="blade" d="M32 18 C38 23, 42 27, 44 32"/>
            <path class="blade" d="M32 18 C38 23, 42 27, 44 32" transform="rotate(60 32 32)"/>
            <path class="blade" d="M32 18 C38 23, 42 27, 44 32" transform="rotate(120 32 32)"/>
            <path class="blade" d="M32 18 C38 23, 42 27, 44 32" transform="rotate(180 32 32)"/>
            <path class="blade" d="M32 18 C38 23, 42 27, 44 32" transform="rotate(240 32 32)"/>
            <path class="blade" d="M32 18 C38 23, 42 27, 44 32" transform="rotate(300 32 32)"/>
          </g>
        </g>
      </svg>
      <a class="wb-badge" href="https://www.npmjs.com/package/praetorius" target="_blank" rel="noopener">
  <img
    src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fregistry.npmjs.org%2Fpraetorius%2Flatest&query=$.version&prefix=v&label=Praetorius%20%E2%80%93%20Interactive%20Portfolio&logo=npm&labelColor=000&color=fff&style=flat&cacheSeconds=3600"
    alt="Praetorius – Interactive Portfolio version (live from npm)">
</a>
    </div>

    <!-- Chip buttons (no delimiters) -->
    <div class="wb-actions">
      <a class="wb-chip" href="https://cbassuarez.com">More info</a>
      <a class="wb-chip" href="https://dexdsl.org">dex</a>
      <a class="wb-chip" href="https://stagedevices.com">Stage Devices</a>
    </div>

    <!-- Minimal microcopy -->
    <small class="wb-micro">© Seb&nbsp;Suarez 2025</small>
  </div>
</nav>

</section>


`,Q='@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&display=swap";#works-console{--fg:#f3f4f6;--muted:#c7c8ce;--dim:#9aa1a9;--warn:#fbbf24;--err:#ef4444;--ok:#22c55e;--accent:#ffffff;--aero-bg:rgba(0,0,0,.9);--aero-stroke:rgba(255,255,255,.02);--aero-blur:14px;--aero-shadow:0 30px 80px rgba(0,0,0,.55);--aero-glow:0 0 0 1px rgba(255,255,255,.05);--line:rgba(255,255,255,.08);--chip-bg:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));--chip-bd:rgba(255,255,255,.16);--chip-bg-h:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));--chip-ring:rgba(245,245,245,.38);--radius:6px}#works-console{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace;--border-ctl: rgba(255,255,255,.18);--border-hover: rgba(245,158,11,.35)}#works-console .wc-frame{color:var(--fg);background:var(--aero-bg);border:1px solid var(--aero-stroke);border-radius:var(--radius);box-shadow:var(--aero-shadow),var(--aero-glow) inset;-webkit-backdrop-filter:saturate(120%) blur(var(--aero-blur));backdrop-filter:saturate(120%) blur(var(--aero-blur));max-width:1100px;margin:20px auto;overflow:hidden}#works-console .wc-output{padding:18px 18px 8px;min-height:260px;max-height:70vh;overflow:auto;line-height:1.52}#works-console .divider{height:0px;background:var(--line);margin:0;opacity:.9}#works-console .wc-input{display:flex;align-items:center;gap:10px;padding:10px 14px 14px;border-top:1px solid var(--line);background:radial-gradient(80% 90% at 0% 0%,rgba(255,255,255,.05),transparent 25%),radial-gradient(80% 90% at 100% 0%,rgba(255,255,255,.03),transparent 25%)}#works-console .wc-prompt{color:var(--accent);font-weight:700;-webkit-user-select:none;user-select:none}#works-console #wc-cmd{flex:1;font:inherit;color:var(--fg);background:transparent;border:none;outline:none;caret-color:var(--accent)}#works-console .line{white-space:pre-wrap;word-break:break-word;opacity:0;transform:translateY(2px);transition:opacity .16s ease-out,transform .16s ease-out}#works-console .line.in{opacity:1;transform:none}#works-console .line.dim{color:var(--dim)}#works-console .line.muted{color:var(--muted)}#works-console .line.warn{color:var(--warn)}#works-console .line.err{color:var(--err)}#works-console .line.ok{color:var(--ok)}#works-console .title{color:var(--title-fg);font-weight:800;letter-spacing:.2px}#works-console .cmd-echo .prompt{color:var(--accent);font-weight:700}#works-console .sp{display:inline-block;width:.4em}#works-console .row{margin:2px 0 12px}#works-console .blk{padding:12px;border:1px solid var(--line);border-radius:var(--radius);background:linear-gradient(180deg,#ffffff0a,#ffffff05);box-shadow:inset 0 1px #ffffff0d}#works-console .one{color:var(--muted)}#works-console .actions{margin-top:8px;display:flex;flex-wrap:wrap;gap:8px}#works-console .btn{position:relative;appearance:none;border:1px solid var(--chip-bd);background:var(--chip-bg);color:var(--btn-fg);border-radius:6px;padding:6px;font:inherit;cursor:pointer;line-height:1.2;box-shadow:inset 0 1px #ffffff14,0 1px #ffffff08;transition:transform .12s ease,background .2s ease,border-color .2s ease,box-shadow .2s ease}#works-console .btn:hover{background:var(--chip-bg-h);transform:translateY(-1px);border-color:var(--border-hover);box-shadow:inset 0 1px #ffffff1a,0 0 6px #f59e0b1f}#works-console .btn:active{transform:translateY(0)}#works-console .btn:focus-visible{outline:none;box-shadow:0 0 0 3px var(--chip-ring)}#works-console .wc-output::-webkit-scrollbar{height:10px;width:10px}#works-console .wc-output::-webkit-scrollbar-thumb{background:#ffffff1f;border-radius:10px}#works-console .wc-output::-webkit-scrollbar-track{background:transparent}#works-console .toast{position:sticky;bottom:6px;align-self:flex-start;margin-top:6px;display:inline-block;padding:6px 10px;border-radius:var(--radius);background:#000000a6;border:1px solid var(--aero-stroke);-webkit-backdrop-filter:saturate(120%) blur(10px);backdrop-filter:saturate(120%) blur(10px);box-shadow:0 10px 30px #00000073;font-size:.92em;color:var(--warn);opacity:0;transform:translateY(4px);transition:opacity .18s ease,transform .18s ease}#works-console .toast.in{opacity:1;transform:none}#works-console .wc-hud{position:sticky;bottom:0;margin:8px 6px 6px;padding:8px 10px;border-radius:var(--radius);background:#ffffff0a;border:1px solid var(--line);box-shadow:inset 0 1px #ffffff0f;font-variant-numeric:tabular-nums;container-type:inline-size}#works-console .wc-hud:empty{display:none}#works-console .wc-hud .row{display:flex;gap:10px;align-items:center;flex-wrap:nowrap;margin:0;white-space:nowrap}#works-console .wc-hud .tag{padding:2px 8px;border-radius:6px;border:1px solid var(--chip-bd);background:var(--chip-bg)}#works-console .wc-hud .tag-now{display:inline-block;max-width:100%;overflow:hidden;white-space:nowrap;vertical-align:middle}#works-console .wc-hud .tag-now .scroll{display:inline-flex;align-items:center;gap:1.25em;will-change:transform}#works-console .wc-hud .tag-now .txt,#works-console .wc-hud .tag-now .dup{white-space:nowrap}#works-console .wc-hud .tag-now.is-marquee .scroll{animation:wc-marquee 16s linear infinite}@keyframes wc-marquee{0%{transform:translate(0)}to{transform:translate(-50%)}}#works-console .meter{position:relative;width:160px;height:6px;border-radius:6px;background:#ffffff1a;overflow:hidden;flex:0 0 160px}#works-console .meter>span{position:absolute;inset:0 100% 0 0;background:linear-gradient(90deg,#ffffffbf,#ffffff59);border-radius:6px}#works-console .wc-hud .soft{color:var(--muted)}#works-console .hud-actions{margin-left:auto;display:flex;gap:8px;align-items:center}#works-console .hud-btn{padding:6px;font-size:.92em;line-height:1.15;border-radius:6px}@container (max-width: 920px){#works-console .meter{width:120px;flex-basis:120px}}@container (max-width: 780px){#works-console .meter{width:80px;flex-basis:80px}}@container (max-width: 640px){#works-console .meter{display:none}#works-console .wc-hud .row{gap:8px}}@container (max-width: 520px){#works-console .wc-hud .row{gap:6px}}html,body{height:100%;overflow:hidden}#works-group{overflow-x:clip}#works-group.wc-group{display:grid;grid-template-rows:auto 1fr auto;height:100dvh;min-height:100svh;overflow:hidden;padding:clamp(8px,1.6vw,16px);box-sizing:border-box;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}#works-console{font-family:inherit!important}#works-console{--title-fg:#fff}#works-console .wc-frame{display:flex;flex-direction:column;margin:clamp(8px,1.5vh,20px) auto}#works-console .wc-split>.wc-frame{margin:0 auto!important}#works-console .wc-split>.wc-pdfpane{margin:0!important}#works-console .wc-output{flex:1 1 auto;max-height:none}.wc-titlebar{position:relative;top:0;padding:4px 6px 8px;background:transparent}.wc-titlebar .wt-wrap{max-width:1100px;margin:0 auto;color:#f3f4f6;opacity:1;transform:none}.wc-titlebar .wt-title{margin:0;font-weight:700;letter-spacing:.2px;font-size:clamp(18px,2.3vw,28px);line-height:1.15}.wc-titlebar .wt-subtitle{margin:.15em 0 0;color:#c7c8ce;font-weight:400;font-size:clamp(6px,1.4vw,16px);display:flex;gap:.6em;align-items:baseline;flex-wrap:wrap}.wc-titlebar .wt-updated{display:inline-flex;align-items:center;gap:.4em;padding:.15em .55em;border-radius:6px;border:1px solid rgba(255,255,255,.16);background:linear-gradient(180deg,#ffffff0a,#ffffff05);color:#fbbf24}.wc-titlebar .wt-wrap{position:relative}#wc-theme-toggle.wc-theme{position:absolute;top:0;right:max(0px,env(safe-area-inset-right));display:inline-grid;place-items:center;width:36px;height:36px;border-radius:6px;border:1px solid rgba(0,0,0,.18);background:linear-gradient(180deg,#ffffffd9,#ffffffa6);color:#0f0f0f;cursor:pointer;padding:0;line-height:1;z-index:2;transition:transform .12s ease,box-shadow .2s ease,border-color .2s ease}#wc-theme-toggle.wc-theme:hover{transform:translateY(-1px);box-shadow:0 6px 18px #0000001f}#wc-theme-toggle svg{width:20px;height:20px;display:block}#works-group[data-theme=dark] .wc-ico-moon,#works-group[data-theme=light] .wc-ico-sun{display:none}.wc-crumbs{align-self:end;background:transparent;padding:8px 6px 2px}.wc-crumbs .wb-list{max-width:1100px;margin:0 auto;padding:0;list-style:none;display:flex;align-items:center;gap:.6em;flex-wrap:wrap}.wc-crumbs .wb-item{display:flex;align-items:center}.wc-crumbs .wb-sep{color:#ffffff73}.wc-crumbs .wb-link{display:inline-flex;align-items:center;gap:.45em;color:#f3f4f6;text-decoration:none;position:relative;padding:.1em .25em}.wc-crumbs .wb-link:after{content:"";position:absolute;left:.25em;right:.25em;bottom:0;height:1px;background:linear-gradient(90deg,#ffffffb3,#ffffff4d);transform:scaleX(0);transform-origin:left;transition:transform .22s ease}.wc-crumbs .wb-link:hover:after{transform:scaleX(1)}.wc-crumbs .wb-txt{font-size:clamp(6px,1.3vw,15px)}@media(max-height:600px){#works-console .wc-hud{position:static;margin-top:8px}}.wc-titlebar{padding:2px 0 6px;background:transparent}.wc-titlebar .wt-wrap{max-width:1100px;margin:0 auto;color:#000;opacity:1;transform:none;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}.wc-titlebar .wt-title{margin:0;font-weight:700;letter-spacing:.2px;font-size:clamp(16px,1.9vw,22px);line-height:1.15;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}.wc-titlebar .wt-subtitle{margin:.2em 0 0;color:#475569;font-weight:400;font-size:clamp(11px,1.2vw,14px);display:flex;gap:.6em;align-items:baseline;flex-wrap:wrap}.wc-titlebar .wt-updated{display:inline-flex;align-items:center;gap:.4em;padding:.05em .45em;border-radius:6px;border:1px solid rgba(0,0,0,.12);background:linear-gradient(180deg,#00000008,#00000004);color:#b45309}#works-console .wc-split{height:clamp(560px,70vh,1200px)}#works-console .wc-frame{height:100%!important;min-height:120px!important;max-height:none!important;display:flex;flex-direction:column;height:100%}#works-console .wc-output{flex:1 1 auto!important;min-height:0!important;max-height:none!important}#works-group .wc-titlebar{display:block!important;position:relative;z-index:1;background:transparent;padding:2px 0 6px;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}#works-group .wc-titlebar .wt-wrap{max-width:1100px;margin:0 auto;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace!important;color:#000!important}#works-group .wc-titlebar .wt-title{margin:0;color:#000!important;font-weight:700;letter-spacing:.01em;font-size:clamp(18px,1.8vw,22px);line-height:1.15;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}#works-group .wc-titlebar .wt-subtitle{margin:.2em 0 0;color:#000!important;font-weight:400;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace;font-size:clamp(11px,1.2vw,14px);display:flex;gap:.6em;align-items:baseline;flex-wrap:wrap}#works-group .wc-titlebar .wt-updated{display:inline-flex;align-items:center;gap:.4em;padding:.05em .45em;border-radius:6px;border:1px solid rgba(0,0,0,.12);background:linear-gradient(180deg,#00000008,#00000004);color:#000;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}.wc-crumbs{align-self:end;background:transparent;min-height:64px;height:64px;display:flex;align-items:center;justify-content:center;font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace;color:#0f0f0f;padding:4px 6px}.wc-crumbs .wb-wrap{width:100%;max-width:1100px;display:grid;grid-template-columns:auto 1fr auto;gap:6px;align-items:center;margin:0 auto}.wc-crumbs .wb-actions{display:flex;gap:10px;justify-content:center;align-items:center}.wc-crumbs .wb-chip{display:inline-flex;align-items:center;justify-content:center;padding:8px 14px;border-radius:6px;border:1px solid var(--border-ctl);background:linear-gradient(180deg,#00000008,#00000004);text-decoration:none;color:#0f0f0f;font-size:clamp(6px,1.2vw,14px);line-height:1;letter-spacing:.005em;position:relative;transition:letter-spacing .2s ease,transform .15s ease,border-color .2s ease,background .2s ease}.wc-crumbs .wb-chip:after{content:"";position:absolute;left:10px;right:10px;bottom:6px;height:1px;background:linear-gradient(90deg,#000000b3,#00000059);transform:scaleX(0);transform-origin:left;transition:transform .22s ease}.wc-crumbs .wb-chip:hover{letter-spacing:.03em;transform:translateY(-1px);border-color:var(--border-hover)}.wc-crumbs .wb-chip:hover:after{transform:scaleX(1)}.wc-crumbs .wb-micro{color:#0f0f0f;opacity:.65;font-size:clamp(11px,1.05vw,13px);-webkit-user-select:none;user-select:none;white-space:nowrap}.wc-crumbs .wb-orbit{width:32px;height:32px;display:block}.wc-crumbs .wb-orbit .iris-rot{transform-origin:32px 32px}.wc-crumbs .wb-orbit .iris-pupil{transform-origin:32px 32px;transition:transform .35s ease}.wc-crumbs .wb-orbit .blade{stroke-dasharray:4 8}.wc-crumbs:hover .wb-orbit .iris-rot{animation:iris-tilt 2.6s ease-in-out infinite}.wc-crumbs:hover .wb-orbit .blade{animation:iris-dash 1.8s linear infinite}.wc-crumbs:hover .wb-orbit .iris-pupil{transform:scale(1.12)}@keyframes iris-tilt{0%{transform:rotate(-6deg)}50%{transform:rotate(6deg)}to{transform:rotate(-6deg)}}@keyframes iris-dash{to{stroke-dashoffset:-20}}@media(prefers-reduced-motion:reduce){.wc-crumbs:hover .wb-orbit .iris-rot,.wc-crumbs:hover .wb-orbit .blade,.wc-crumbs:hover .wb-orbit .iris-pupil{animation:none!important;transform:none!important}}#works-console .wc-pdfpane{position:relative;border:1px solid var(--border-ctl);background:#fff;border-radius:6px;box-shadow:0 30px 80px #0000001f;overflow:hidden;display:flex;flex-direction:column;min-height:0;transform:translate(12px);opacity:0;pointer-events:none;transition:transform .22s ease,opacity .22s ease}#works-console.has-pdf .wc-pdfpane{transform:translate(0);opacity:1;pointer-events:auto}#works-console .wc-pdfbar{display:flex;align-items:center;gap:10px;padding:8px 10px;border-bottom:1px solid var(--border-ctl);background:linear-gradient(180deg,#00000008,#00000003);font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}#works-console .wc-pdf-title{font-size:clamp(14px,1.6vw,18px);line-height:1.2;letter-spacing:.01em;color:#0f0f0f;opacity:.9;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1 1 auto;min-width:0}#works-console .wc-pdf-title{font-weight:600}#works-console .wc-pdf-close{margin-left:auto;appearance:none;border:1px solid var(--border-ctl);background:linear-gradient(180deg,#0000000a,#00000004);color:#0f0f0f;padding:6px 10px;border-radius:10px;cursor:pointer;line-height:1}#works-console .wc-pdf-frame{display:block;width:100%;flex:1 1 auto;height:auto!important;border:0;background:#fff}#works-console .wc-frame{display:flex;flex-direction:column}@media(max-width:900px){#works-console.has-pdf .wc-split{grid-template-columns:1fr;position:relative}#works-console .wc-pdfpane{position:absolute;inset:0 0 0 auto;width:min(92vw,720px);border-left:1px solid rgba(0,0,0,.12);border-top-left-radius:6px;border-bottom-left-radius:6px;box-shadow:-24px 0 60px #0000002e;transform:translate(6%)}}#works-group.wc-group{grid-template-rows:auto minmax(0,1fr) auto}#works-console{min-height:0}#works-console .wc-frame{min-height:0;height:100%}#works-console .wc-output{flex:1 1 auto;min-height:0;overflow:auto}#works-console .wc-split{display:grid;grid-template-columns:minmax(0,calc(100% - var(--pdfW, 0px) - var(--g))) minmax(0,var(--pdfW, 0px));gap:var(--g);align-items:stretch;min-height:0;padding-right:max(var(--edge-pad),env(safe-area-inset-right));box-sizing:border-box}#works-console{--pdfW: 0px;--pdfTrans: 10px;--pdfOpacity: 0;--edge-pad: clamp(10px, 1.6vw, 18px);--g: clamp(8px, 1.2vw, 14px)}#works-console.has-pdf{--pdfW: clamp(320px, 44vw, 720px);--pdfTrans: 0px;--pdfOpacity: 1}#works-console .wc-pdfpane{width:var(--pdfW);max-width:var(--pdfW);transform:translate(var(--pdfTrans));opacity:var(--pdfOpacity);pointer-events:var(--pdfPanePE, none);border:1px solid var(--border-ctl);background:#fff;border-radius:6px;box-shadow:0 30px 80px #0000001f;overflow:hidden;transition:width .28s cubic-bezier(.28,.01,.2,1),max-width .28s cubic-bezier(.28,.01,.2,1),transform .28s cubic-bezier(.28,.01,.2,1),opacity .24s ease}#works-console.has-pdf .wc-pdfpane{--pdfPanePE: auto}#works-console .wc-pdfbar{display:flex;align-items:center;gap:10px;flex:0 0 auto;padding:8px 10px;border-bottom:1px solid var(--border-ctl);background:linear-gradient(180deg,#00000008,#00000003);font-family:IBM Plex Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace}#works-console .wc-pdf-frame{display:block;width:100%;flex:1 1 auto;min-height:0;height:100%!important;border:0;background:#fff}@media(max-width:900px){#works-console .wc-split{position:relative}#works-console .wc-pdfpane{position:absolute;inset:0 0 0 auto;width:min(92vw,720px);max-width:min(92vw,720px);border-left:1px solid var(--border-ctl);border-top-left-radius:6px;border-bottom-left-radius:6px;box-shadow:-24px 0 60px #0000002e}}@media(max-width:900px){html,body{height:auto!important;min-height:100%!important;overflow:auto!important}#works-group.wc-group{height:auto!important;min-height:100svh!important;grid-template-rows:auto auto auto!important}#works-console{min-height:auto!important}#works-console .wc-frame{height:auto!important;max-height:none!important}#works-console .wc-output{max-height:none!important;-webkit-overflow-scrolling:touch}#works-console .wc-hud{position:static!important;margin-top:8px!important}#works-console .wc-input{padding-bottom:max(14px,env(safe-area-inset-bottom))!important}}@supports (height: 100dvh){@media(max-width:900px){#works-group.wc-group{min-height:100dvh!important}}}@media(max-width:900px){#works-console .wc-pdfpane{position:absolute;left:max(6px,env(safe-area-inset-left))!important;right:max(6px,env(safe-area-inset-right))!important;width:auto!important;max-width:none!important;transform:none!important}#works-group.wc-group{overflow:visible!important}#works-console.has-pdf:before{content:"";position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(120% 100% at 50% 10%,rgba(0,0,0,.2),rgba(0,0,0,.12) 35%,transparent 65%)}#works-console .wc-split{position:relative;z-index:1}}#works-group{color-scheme:light dark}#wc-theme-toggle.wc-theme{position:absolute;top:max(8px,calc(env(safe-area-inset-top) + 4px));right:max(8px,calc(env(safe-area-inset-right) + 4px));z-index:2;display:inline-grid;place-items:center;width:34px;height:34px;border-radius:10px;padding:0;cursor:pointer;transition:transform .12s ease,box-shadow .2s ease,background .2s ease,border-color .2s ease}#wc-theme-toggle.wc-theme:active{transform:translateY(0)}#wc-theme-toggle .wc-theme-ico{display:block}#works-group[data-theme=dark] #wc-theme-toggle{background:linear-gradient(180deg,#00000008,#00000004);border:1px solid var(--border-ctl);color:#0f0f0f;box-shadow:inset 0 1px #fff9}#works-group[data-theme=dark] #wc-theme-toggle:focus-visible{outline:none;box-shadow:0 0 0 3px #0000003d}#works-group[data-theme=light] #wc-theme-toggle{background:linear-gradient(180deg,#00000008,#00000004);border:1px solid var(--border-ctl);color:#0f0f0f;box-shadow:inset 0 1px #fff9}#works-group[data-theme=light] #wc-theme-toggle:focus-visible{outline:none;box-shadow:0 0 0 3px #0000003d}#works-group[data-theme=dark] #works-console{--fg:#f3f4f6;--muted:#c7c8ce;--dim:#9aa1a9;--warn:#fbbf24;--err:#ef4444;--ok:#22c55e;--accent:#ffffff;--aero-bg:rgba(0,0,0,.9);--aero-stroke:rgba(255,255,255,.02);--aero-blur:14px;--aero-shadow:0 30px 80px rgba(0,0,0,.55);--aero-glow:0 0 0 1px rgba(255,255,255,.05);--line:rgba(255,255,255,.08);--chip-bg:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));--chip-bd:rgba(255,255,255,.16);--chip-bg-h:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.025));--chip-ring:rgba(245,245,245,.38);--btn-fg:#ffffff}#works-group[data-theme=light] #works-console{--border-ctl: rgba(0,0,0,.22);--border-hover: rgba(255,25,25,.55);--fg:#0f172a;--muted:#334155;--dim:#475569;--warn:#b45309;--err:#b91c1c;--ok:#15803d;--accent:#0f0f0f;--aero-bg:rgba(255,255,255,.88);--aero-stroke:rgba(0,0,0,.06);--aero-blur:6px;--aero-shadow:0 30px 80px rgba(0,0,0,.12);--aero-glow:0 0 0 1px rgba(0,0,0,.04);--line:rgba(0,0,0,.1);--chip-bg:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));--chip-bd: var(--border-ctl);--chip-bg-h:linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.02));--chip-ring:rgba(0,0,0,.28);--btn-fg:#0f0f0f}#works-group[data-theme=dark] .wc-titlebar .wt-wrap,#works-group[data-theme=dark] .wc-titlebar .wt-title,#works-group[data-theme=dark] .wc-titlebar .wt-subtitle{color:#000!important}#works-group[data-theme=dark] .wc-titlebar .wt-updated{border-color:#0000001f!important;background:linear-gradient(180deg,#00000008,#00000004)!important;color:#000!important}#works-group[data-theme=dark] .wc-crumbs{color:#0f0f0f}#works-group[data-theme=dark] .wc-crumbs .wb-micro{color:#0f0f0f;opacity:.65}#works-group .wc-crumbs .wb-actions .wb-chip{border:1px solid var(--border-ctl);background:linear-gradient(180deg,#00000008,#00000004);color:#0f0f0f}#works-group[data-theme=dark] .wc-crumbs .wb-chip:after{background:linear-gradient(90deg,#000000b3,#00000059)}#works-group[data-theme=dark] .wc-crumbs .wb-orbit g{stroke:#0f0f0f!important}#works-group[data-theme=dark] #works-console .wc-pdfpane{border-color:#ffffff1f;background:#0b0b0b;box-shadow:0 30px 80px #0000008c}#works-group[data-theme=dark] #works-console .wc-pdfbar{border-bottom:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,#ffffff0f,#ffffff05)}#works-group[data-theme=dark] #works-console .wc-pdf-title{color:#f3f4f6;opacity:.85}#works-group[data-theme=dark] #works-console .wc-pdf-close{border:1px solid rgba(255,255,255,.18);background:linear-gradient(180deg,#ffffff0f,#ffffff05);color:#fff}@media(prefers-reduced-motion:reduce){#wc-theme-toggle{transition:none!important}}#works-console{color-scheme:light dark}#works-group[data-theme=light] #works-console{--title-fg:#0f0f0f}#works-group[data-theme=light] #works-console{--border-ctl: rgba(0,0,0,.22);--border-hover: rgba(255,25,25,.55);--fg:#0f172a;--muted:#475569;--dim:#64748b;--warn:#b45309;--err:#b91c1c;--ok:#166534;--accent:#0f0f0f;--aero-bg:rgba(255,255,255,.96);--aero-stroke:rgba(0,0,0,.1);--aero-shadow:0 20px 60px rgba(0,0,0,.12);--aero-glow:0 0 0 1px rgba(0,0,0,.03);--line:rgba(0,0,0,.12);--chip-bg:linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.015));--chip-bd: var(--border-ctl);--chip-bg-h:linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,.02));--chip-ring:rgba(0,0,0,.28);--title-fg:#0f0f0f}#works-group[data-theme=dark] #works-console{--border-hover: var(--border-ctl);--border-ctl: rgba(255,255,255,.55);--title-fg:#fff;--chip-bd: var(--border-ctl)}#works-group .wc-titlebar .wt-updated{border-color:var(--border-ctl)!important;background:linear-gradient(180deg,#00000008,#00000004);color:#0f0f0f}#works-group[data-theme=dark] .wc-crumbs,#works-group[data-theme=dark] .wc-crumbs .wb-micro,#works-group[data-theme=dark] .wc-crumbs .wb-chip{color:#0f0f0f}#works-group[data-size=lg]{padding:clamp(12px,2vw,24px)}#works-group[data-size=lg] .wc-titlebar .wt-wrap,#works-group[data-size=lg] #works-console .wc-frame,#works-group[data-size=lg] .wc-crumbs .wb-wrap{max-width:1280px}#works-group[data-size=lg] #works-console{font-size:16px}#works-group[data-size=lg] .wc-titlebar .wt-title{font-size:clamp(20px,2.4vw,30px)}#works-group[data-size=lg] .wc-titlebar .wt-subtitle{font-size:clamp(12px,1.3vw,16px)}#works-group[data-size=lg] #works-console .wc-split{height:clamp(620px,74vh,1400px)!important}#works-group[data-size=lg] #works-console.has-pdf{--pdfW: clamp(360px, 50vw, 860px)}#works-group #wc-theme-toggle{position:fixed!important;top:max(8px,calc(env(safe-area-inset-top) + 6px))!important;right:max(8px,calc(env(safe-area-inset-right) + 6px))!important;z-index:1000!important}.wc-crumbs .wb-brand{display:flex;flex-direction:row;align-items:center;gap:8px;white-space:nowrap}.wc-crumbs .wb-badge{line-height:0}.wc-crumbs .wb-badge img{display:block;height:18px}@media(max-width:600px){.wc-crumbs .wb-badge img{height:16px}}';async function K(p,a={}){const s=typeof p=="string"?document.querySelector(p):p||document.body,l=s&&s.querySelector?.("#works-group")||document.getElementById("works-group");if(l){const b=document.createElement("style");b.textContent=Q,(l.parentElement||s).insertBefore(b,l),l.querySelector("#works-console")||(l.outerHTML=`<style>${Q}</style>`+L)}else{const b=document.createElement("div");b.innerHTML=`<style>${Q}</style>`+L,s.appendChild(b)}await Promise.resolve().then(()=>Ue)}const ue=K;class fe{constructor(a={}){this.opts=a}async mount(a){return K(a,this.opts)}}const me={mount:K,init:ue,App:fe};try{const p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{};p&&!p.PRAE&&(p.PRAE=me)}catch{}const Re=160;function j(p){return p==null?"":String(p)}function je(p){const a=j(p);return a?a.replace(/\r?\n+/g," ").replace(/\s+/g," ").trim():""}function De(p){let a=j(p);return a?(a=a.replace(/```[\s\S]*?```/g," "),a=a.replace(/`[^`]*`/g," "),a=a.replace(/!\[[^\]]*\]\([^)]*\)/g,""),a=a.replace(/\[([^\]]+)\]\([^)]*\)/g,"$1"),a=a.replace(/^#{1,6}\s*/gm,""),a=a.replace(/^>\s?/gm,""),a=a.replace(/([*_~]{1,3})([^*_~]+)\1/g,"$2"),a=a.replace(/<[^>]+>/g," "),a.replace(/\s+/g," ").trim()):""}function qe(p,a){if(!p)return"";if(p.length<=a)return p;const l=p.slice(0,Math.max(0,a-1)).replace(/\s+\S*$/,"").trim();return l.length>=a-1?`${l}…`:`${p.slice(0,a-1).trim()}…`}function We(p){if(!p)return"";const a=De(p);if(!a)return"";const s=a.match(/(.+?[.!?])(?=\s|$)/);let l=s?s[1]:a;if(!s){const b=l.indexOf(`
`);b>=0&&(l=l.slice(0,b))}return l=l.replace(/\s+/g," ").trim(),l?qe(l,Re):""}function _e(p={}){const a=p||{},s={...a},l=a.oneliner??a.one??"",b=j(l);let h=je(b).trim();const u=b.trim().length>0,G=m=>{if(m==null)return"";let d;return Array.isArray(m)?d=m.map(A=>j(A).replace(/\r\n?/g,`
`).trim()).filter(Boolean).join(`

`):d=j(m),d=d.replace(/\r\n?/g,`
`).trim(),d?(d=d.replace(/\n{3,}/g,`

`),d=d.replace(/[ \t]{2,}/g," "),d):""},Z=["description","desc","program","programNote","programNotes","notes","body","text","copy"];let w="",S=null;for(const m of Z){const d=G(a[m]);if(d){w=d,S=m;break}}!h&&!u&&w&&(h=We(w)||"");let v=!1;const T=m=>m.replace(/\s+/g," ").trim().toLowerCase();if(w){const m=w.split(/\n{2,}/).map(d=>d.trim()).find(Boolean)||w.split(/\n+/).map(d=>d.trim()).find(Boolean)||"";m&&h&&T(m)===T(h)&&(h="",v=!0)}else h&&(w="");if(u&&h?s.oneliner=h:"oneliner"in s&&delete s.oneliner,h?s.one=h:"one"in s&&delete s.one,w?s.description=w:"description"in s&&delete s.description,h||(h=null),w||(w=null),typeof window<"u"&&window&&window.__PRAE_DEBUG)try{const m=window.console&&window.console.debug?window.console.debug:window.console?.log;m&&m("[prae] normalizeWork",{descriptionField:S,dedupedOneliner:v})}catch{}return{...s,onelinerEffective:h||null,descriptionEffective:w||null}}(function(){if(typeof document>"u")return;const a=document.head||document.querySelector("head");if(!a||a.querySelector('link[rel="icon"]'))return;const s=document.createElement("link");s.setAttribute("rel","icon"),s.setAttribute("type","image/svg+xml"),s.setAttribute("href",'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"%3E%3Ccircle cx="8" cy="8" r="7" fill="%23f97316"/%3E%3C/svg%3E'),a.appendChild(s)})(),(function(){function a(){try{var s=document.getElementById("works-group"),l=localStorage.getItem("wc.theme");if(l&&l.trim().charAt(0)==="{")try{l=(JSON.parse(l)||{}).mode||"dark"}catch{l="dark"}var b=l==="light"?"light":"dark";s&&(s.removeAttribute("data-theme-mode"),s.setAttribute("data-theme",b)),document.documentElement.style.colorScheme="light dark"}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a,{once:!0}):a()})();function ge(){(()=>{const p=document.getElementById("works-group")||document,a=(e,t=p)=>t.querySelector(e),s=a("#works-console .wc-output"),l=a("#wc-cmd"),b=a("#works-console .wc-input"),h=a("#works-console"),u={1:{id:1,slug:"soundnoisemusic",title:"WORK 1 — String Quartet No. 2 “SOUNDNOISEMUSIC”",oneliner:"A through-composed/indeterminate quartet that alternates fixed score, structured mischief, and noise permissions.",cues:[{label:"@10:30",t:P("10:30")}],audioId:"wc-a1",pdf:"https://cdn.jsdelivr.net/gh/cbassuarez/website-blog/STRING%20QUARTET%20NO.%202%20_soundnoisemusic_%20-%20Score-min.pdf",openNote:[" ","Heard melodies are sweet, but those unheard","Are sweeter; therefore, ye soft pipes, play on;","Not to the sensual ear, but, more endeared,","Pipe to the spirit ditties of no tone:","John Keats, “Ode on a Grecian Urn,” lines 11-14"," ","Every other performance, this piece is entirely improvised. Every other performance, the performers follow the through-composed score. Every other other performance, this piece is played at 80% intent and 50% rsentment. Every other other other performance, the members of this piece trade parts. Every 10 performanes, the members of the ensemble are playing a cruel joke on the composer and the audience. Every 12, the 5th page of every part is swapped for a page from one of J.S. Bach’s Sonatas or Partitas for Violin. On any performance where it is the ensemble’s second time performing that day, the music is to be read in retrograde inversion. Every peformance indoors must be done at double tempo. In the event that performers were not fed prior to performing, they may play noise whenever they may choose. If ███████████████████████████████████████, the piece should be played in near-complete darkness."," ","If you cannot tell the difference if you cannot beat ‘em join ‘em then does it even matter?"]},2:{id:2,slug:"lux-nova",title:"WORK 2 — Organum Quadruplum “Lux Nova”",oneliner:"A stained-glass acoustics study: bowed dalle-de-verre slab transduced into a ring of pianos—polyphony by distance rather than shared air.",cues:[{label:"@7:45",t:P("7:45")},{label:"@9:15",t:P("9:15")}],audioId:"wc-a2",pdf:null,openNote:[" ","There is a special quality to the kind of light that stained glass emanates which I find fascinating. Unlike traditional art, stained glass is an entanglement of light and material: the art is not the light, nor the glass, but the way the light conditions the space beyond which it occupies (a material declaration reminiscent of Fichtian dialectics or medieval anagogy; a sum greater than its parts). In this sense, it is not reflecting light but conditioning it, giving light a quality that makes its invisibilities visible."," ","Abbot Suger, in a historical reaffirmation of Gothic architecture, described this phenomenon – light passing through glass, which gives body and boundary to the invisible – as lux nova. Medieval builders saw themselves as material theologians: with the technological advancements of the Gothic period allowing for great windows, they could materialize theological truths through illuminatio, making light itself into an art that “corresponds” to celestial œuvres."," ","At the center is a dalle de verre slab, mounted to approximate free-free boundary conditions: edge-untethered, supported at nodal points, so the plate speaks in families of modes. As the bow excites the glass (in a lineage that runs from Suger’s Saint-Denis and its program of lux nova to Le Corbusier’s Notre-Dame du Haut with its deep-set colored glazing to Richter’s pixelated Cologne Cathedral window), the bow draws breath, a sort of pneuma. These sounds are transmitted via transducer speakers to a ring of pianos which, even without hammer action, perform as a sort of telephoned organum: polyphony carried at a distance by transduction rather than shared air. In this way, the pianos act as armature and tracery, structures that bind."]},3:{id:3,slug:"amplifications-marimbaideefixe",title:"WORK 3 — AMPLIFICATIONS I · MARIMBAideefixe",oneliner:"Two prepared pianos as resonators for a 5.0-octave marimba: sympathetic “ghost ensemble” via transduction.",cues:[{label:"@5:49",t:P("5:49")}],audioId:"wc-a3",pdf:"https://cdn.jsdelivr.net/gh/cbassuarez/website-blog/AMPLIFICATIONS%201.%20MARIMBAideefixe.pdf",openNote:[" ","AMPLIFICATIONS – a series of improvised compositions, utilizing multiple pianos as resonating bodies to extend the sustain of various instruments. with various metal implements scattered throughout the piano bodies, the strings sympathetically reverberate along to the improvisatory sounds of each instrument, at times a whisper, at times a roar. microphones are placed inside the body of the piano capturing a large, harmonious reverberation, a ghostly chamber ensemble of one. credits released October 16, 2023 marimba, viola da gamba, music box, multiple percussion, desk bells, sebastian suarez-solis audio, sebastian suarez-solis photo, sebastian suarez-solis recorded at California Institute of the Arts on Oct. 13-15, 2023. "," ","MARIMBAideefixe – 2 prepared pianos + 5.0 octave marimba with the marimba, i found that the pianos were quite receptive to many of the notes and harmonies i would play. even though the marimba is tuned to 442, or maybe because of it, notes would pop out and rattle metal discs and bells inside the piano, sometimes the same note, sometimes a more distant one. the marimba makes the pianos roar, swell to life, a sort of homunculus, a marionette. a bell swirls around inside the body of the piano, providing a rounded, tumbling ostinato. a ghostly chamber ensemble. i describe the track as an idée fixe as the main motivating phrase is such a focus of my playing. the piano seems to like it very well. a note about barlines: This piece is constructed in two voices which move independently. For this reason, barlines are modified to preserve the nature of the voices. You will see that, often, barlines do not match up until the end of a phrase. This might make more sense when listening to the recording. Visually, it aims to help the performer notice distance, silence, and the space between instances, where more traditional notation may not. The phrases played, though disjunct, are imitations of a baroque style, extemporized in a baroque fashion."]}};Object.keys(u).forEach(e=>{const t=u[e];Array.isArray(t.cues)?t.cues=t.cues.map(gt):t.cues=[],u[e]=_e(t)});const G={soundnoisemusic:{pdfStartPage:11,mediaOffsetSec:0,pageMap:[{at:"0:30",page:1},{at:"1:00",page:2},{at:"1:35",page:3},{at:"2:00",page:4},{at:"2:48",page:5},{at:"4:03",page:6},{at:"4:35",page:7},{at:"4:52",page:8},{at:"5:29",page:9},{at:"5:56",page:10},{at:"6:12",page:11},{at:"6:28",page:12},{at:"7:54",page:13},{at:"8:39",page:14},{at:"9:44",page:15},{at:"10:30",page:16}]},"amplifications-marimbaideefixe":{pdfStartPage:7,mediaOffsetSec:0,pageMap:[{at:"0:00",page:1},{at:"1:07",page:2},{at:"2:13",page:3},{at:"3:33",page:4},{at:"4:17",page:5},{at:"5:01",page:6},{at:"5:49",page:7},{at:"6:44",page:8},{at:"7:22",page:9},{at:"7:49",page:10},{at:"8:39",page:11},{at:"9:45",page:12},{at:"10:39",page:13},{at:"12:01",page:14},{at:"12:47",page:15},{at:"13:56",page:16},{at:"15:04",page:17},{at:"15:44",page:18},{at:"16:42",page:19},{at:"18:40",page:20}]}},Z=["help","list","open","play","pause","stop","copy","goto","pdf","vol","speed","resume","share","unlock","clear","theme"],w={h:"help",ls:"list",o:"open",p:"play",pa:"pause",st:"stop",cp:"copy",g:"goto",v:"vol",sp:"speed",rs:"resume",sh:"share",ul:"unlock",cls:"clear",th:"theme"},S=[];let v=0,T=null,D=!1;const g={last:{n:null,at:0},vol:1,rate:1};ne(),q("list",!0),ee(!0),ie(),requestAnimationFrame(X),requestAnimationFrame(()=>{s.scrollTop=0}),window.addEventListener("load",()=>{s.scrollTop=0},{once:!0}),b.addEventListener("submit",e=>{e.preventDefault();const t=l.value.trim();if(!t){q(""),l.value="";return}D=!0,q(t,!0),S.push(t),v=S.length,m(t),l.value=""}),l.addEventListener("keydown",e=>{if(e.key==="ArrowUp"&&v>0&&(v--,l.value=S[v]||"",$e(),e.preventDefault()),e.key==="ArrowDown"&&v<S.length&&(v++,l.value=S[v]||"",$e(),e.preventDefault()),e.key==="c"&&e.ctrlKey&&(i("^C","muted",!0),l.value="",e.preventDefault()),e.key==="l"&&e.ctrlKey&&(Ie(),ne(),q("list",!0),ee(!0),l.value="",e.preventDefault()),e.key==="Tab"){e.preventDefault();const t=l.value.trim().split(/\s+/),o=t[0]||"",n=Object.keys(w).concat(Z).filter(c=>c.startsWith(o));n.length===1&&(t[0]=Pe(n[0]),l.value=t.join(" ")+" ")}}),h&&h.addEventListener("click",e=>{const t=e.target.closest("button");if(!t||!h.contains(t))return;if(t.classList.contains("js-play")){const r=Ne(t);if(r==null)return;ae(`play ${r}`);return}if(t.classList.contains("js-playat")){const r=Ne(t);if(r==null)return;const n=xt(t);ae(`play ${r} ${n}`);return}const o=t.getAttribute("data-cmd");o&&ae(o)});function m(e){const t=e.trim().split(/\s+/);let o=Pe(t.shift()?.toLowerCase()||"");const r=t;switch(o){case"help":Ge();break;case"list":ee();break;case"open":be(r[0]);break;case"play":xe(r);break;case"pause":Ye(r[0]);break;case"stop":Je(r[0]);break;case"copy":Xe(r.join(" "));break;case"goto":Qe(r.join(" "));break;case"pdf":Ze(r[0]);break;case"vol":nt(r[0]);break;case"speed":at(r[0]);break;case"resume":it(r[0]);break;case"share":st(r[0],r[1]);break;case"unlock":ct();break;case"theme":At(r);break;case"clear":Ie(),ne();break;default:o?i(`error: unknown command "${o}"`,"err",!0):i("","",!0)}}let d={audio:null,slug:null,lastPrinted:null,_on:null};function A(e,t=0){const o=G[e];if(!o)return 1;const r=he(o,t);return(o.pdfStartPage||1)+(r-1)+(o.pdfDelta??0)}function He(e){return typeof e=="number"?e:P(e)}function he(e,t){const o=(t||0)+(e.mediaOffsetSec||0);let r=e.pageMap[0]?.page??1;for(const n of e.pageMap){const c=He(n.at);if(o>=c)r=n.page;else break}return r}function we(){d.audio&&d._on&&(d.audio.removeEventListener("timeupdate",d._on),d.audio.removeEventListener("seeking",d._on)),d={audio:null,slug:null,lastPrinted:null,_on:null}}function Ke(e,t){we();const o=G[e];if(!o||!t)return;const r=()=>{const n=he(o,t.currentTime||0);if(n!==d.lastPrinted){d.lastPrinted=n;const c=A(e,t.currentTime||0);try{console.debug("[pagefollow]",{slug:e,printed:n,pdfPage:c,t:t.currentTime|0})}catch{}window.dispatchEvent(new CustomEvent("wc:pdf-goto",{detail:{slug:e,printedPage:n,pdfPage:c}}))}};d={audio:t,slug:e,lastPrinted:null,_on:r},t.addEventListener("timeupdate",r,{passive:!0}),t.addEventListener("seeking",r,{passive:!0}),r()}function Ge(){V("Commands"),lt(["help                   Show this help","list                   List the three works with actions","open <n>               Print program note for work n","play <n> [mm:ss|s]     Play work n at time (defaults to first cue)","pause <n>              Pause work n","stop <n>               Stop work n","copy <n> [time]        Copy deep link (supports ?t=)","goto <n> [time]        Jump to #work-n (supports ?t=)","pdf <n>                Open PDF for work n (1 & 3 only)","vol <0–100>            Set volume percent","speed <0.5–2>          Set playback rate","resume [n]             Resume last (or specific) work","share <n> [time]       Share/copy deep link (supports ?t=)","unlock                 One-shot autoplay unlock","clear                  Clear console","","aliases: h, ls, o, p, pa, st, cp, g, v, sp, rs, sh, ul, cls"],"muted",12)}function ee(e=!1){V(" "),Object.values(u).map((o,r)=>{const n=document.createElement("div");n.className="row";const c=pt(o,r);return n.dataset.workIndex=String(c),n.appendChild(dt([kt(`[${o.id}] ${o.title}`),vt(o.onelinerEffective||"","one"),Ee([N(`open ${o.id}`,"Open"),...Se(o,c),N(`copy ${o.id}`,"Copy URL"),...o.pdf?[N(`pdf ${o.id}`,"PDF")]:[]],c)],c)),n}).forEach((o,r)=>setTimeout(()=>{s.appendChild(o),yt(o),Y()},r*30))}function be(e){const t=parseInt(e,10),o=u[t];if(!o)return i(`error: unknown work ${e}`,"err",!0);V(o.title),o.openNote.forEach((n,c)=>setTimeout(()=>i(n,"",!0),c*18));const r=Ee([...Se(o,o.id),N(`copy ${o.id}`,"Copy URL"),...o.pdf?[N(`pdf ${o.id}`,"PDF")]:[]],o.id);s.appendChild(r),B(r),Y()}function xe(e){const t=parseInt(e[0],10),o=u[t];if(!o)return i(`error: unknown work ${e[0]||""}`,"err",!0);const r=e[1]?P(e[1]):o.cues[0]?.t??0;if(r<0)return i(`error: invalid time "${e[1]||""}" (use mm:ss or seconds)`,"err",!0);const n=a("#"+o.audioId);if(!n)return i("error: audio element missing","err",!0);if(!n.src){const f=n.dataset.audio||"",k=Te(f);if(!k)return i("warn: no audio source found","warn",!0);n.src=k,n.load()}const c=()=>{try{n.currentTime=r}catch{}Ve(n,t,r)};if(n.readyState>=1)c();else{const f=()=>{n.removeEventListener("loadedmetadata",f),c()};n.addEventListener("loadedmetadata",f)}}function Ve(e,t,o){typeof Le=="function"&&Le(e);const r=e.play();r&&typeof r.catch=="function"&&r.catch(n=>{if((n&&n.name||"")==="NotAllowedError")i("warn: autoplay blocked; press play once in the browser","warn",!0),Lt("Autoplay blocked — click any Play action once, then retry.");else{const f=Ct(e);i(`error: could not start playback (${f})`,"err",!0),St(e.src)&&i('hint: Google Drive viewer links must be converted to direct "uc?export=download" links. This console auto-rewrites, but very large files may still require re-hosting.',"muted",!0)}}),g.last={n:t,at:o||0},Pt(t),E(t,e),Ke(u[t].slug,e),tt(t),i(`playing [${t}] at ${$(o)} ▷`,"",!0)}function Ye(e){const t=parseInt(e,10),o=u[t];if(!o)return i(`error: unknown work ${e}`,"err",!0);const r=a("#"+o.audioId);r&&!r.paused?(r.pause(),g.last={n:t,at:r.currentTime||0},E(t,r),i(`paused [${t}] at ${$(r.currentTime|0)} ❚❚`,"",!0)):i(`paused [${t}]`,"muted",!0)}function Je(e){const t=parseInt(e,10),o=u[t];if(!o)return i(`error: unknown work ${e}`,"err",!0);const r=a("#"+o.audioId);r&&(r.pause(),r.currentTime=0),g.last={n:t,at:0},It(),we(),i(`stopped [${t}] ⏹`,"",!0)}function Xe(e){const t=(e??"").toString().trim().split(/\s+/),o=parseInt(t[0]||"",10),r=t[1];return $t(o,r)}function Qe(e){const t=(e??"").toString().trim().split(/\s+/),o=parseInt(t[0]||"",10);if(!u[o])return i(`error: unknown work ${t[0]||""}`,"err",!0);const r=se(t[1]);location.hash=`#work-${o}${r?`?t=${r}`:""}`,i(`goto #work-${o}${r?`?t=${r}`:""}`,"ok",!0)}function Ze(e){const t=parseInt(e,10);if(!e)return i("error: pdf requires a work number (1 or 3)","err",!0);const o=u[t];if(!o)return i(`error: unknown work ${e}`,"err",!0);if(!o.pdf)return i(`error: no PDF available for work ${t}`,"err",!0);ye(o.pdf,o.title||`Work ${t}`);const{n:r}=Et();r!=null&&r!==t&&xe([String(t)])}const x=document.getElementById("works-console"),te=x.querySelector(".wc-pdfpane"),et=x.querySelector(".wc-pdf-title"),z=x.querySelector(".wc-pdf-frame"),ke=x.querySelector(".wc-pdf-close");let F=null,O=null,oe=!1;window.addEventListener("wc:pdf-goto",e=>{const{slug:t,pdfPage:o}=e.detail||{};if(!(!z||!o)){if(!x.classList.contains("has-pdf")||t&&t!==O||!oe){F={slug:t,pdfPage:o};return}ve(o)}}),z.addEventListener("load",()=>{oe=!0,F&&(!F.slug||F.slug===O)&&(ve(F.pdfPage),F=null)});function ve(e){const t=z.src||"";if(/\/viewer\.html/i.test(t)){const o=new URL(t,location.href),r=new URLSearchParams(o.hash.replace(/^#/,"")),n=Number(r.get("page")||"1"),c=Number(e);if(n===c)return;r.set("page",String(c)),r.has("zoom")||r.set("zoom","page-width"),o.hash="#"+r.toString(),z.src=o.toString()}}function ye(e,t){const o=rt(e),r=ot(o);et.textContent=String(t||"Score");const n=/^https?:\/\//i.test(r)?r:"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.9.179/web/viewer.html?file="+encodeURIComponent(r);let c=1;const f=Object.values(u).find(y=>y.pdf===e);O=f?f.slug:null,x.dataset.pdfSlug=O||"",f&&d?.slug===f.slug?c=A(f.slug,d.audio?.currentTime||0):f?c=A(f.slug,0):d?.slug&&(c=A(d.slug,d.audio?.currentTime||0));const k=n.split("#")[0];oe=!1,z.src=`${k}#page=${Math.max(1,c)}&zoom=page-width&toolbar=0`,x.classList.add("has-pdf"),te.setAttribute("aria-hidden","false"),ie(),i(`opening ${t}…`,"muted",!0),d&&typeof d._on=="function"&&(d.lastPrinted=null,d._on()),U(8)}function re(){te.setAttribute("aria-hidden","true"),x.classList.remove("has-pdf"),O=null,delete x.dataset.pdfSlug,U(8),setTimeout(()=>{z.src="about:blank"},160),ie()}function tt(e){const t=u[e];if(!t)return;const o=x.classList.contains("has-pdf");if(!t.pdf){re();return}o&&O===t.slug||ye(t.pdf,t.title||`Work ${e}`)}ke&&(ke.addEventListener("click",re),document.addEventListener("keydown",e=>{e.key==="Escape"&&x.classList.contains("has-pdf")&&re()},{passive:!0})),te.addEventListener("transitionend",e=>{(e.propertyName==="width"||e.propertyName==="max-width"||e.propertyName==="transform"||e.propertyName==="opacity")&&U(4)},{passive:!0}),new MutationObserver(()=>U(4)).observe(x,{attributes:!0,attributeFilter:["class"]});function ot(e){const t=e.match(/https?:\/\/(?:drive|docs)\.google\.com\/file\/d\/([^/]+)\//);if(t){const n=`https://drive.google.com/uc?export=download&id=${t[1]}`;return`https://mozilla.github.io/pdf.js/web/viewer.html?file=${encodeURIComponent(n)}#page=1&zoom=page-width&toolbar=0`}const o=e.startsWith(location.origin),r=/^https?:\/\/([^\/]*\.)?(jsdelivr\.net|unpkg\.com|githubusercontent\.com|cloudflare-ipfs\.com|stagedevices\.com|dexdsl\.org|cbassuarez\.com)\//i.test(e);return o||r?`https://mozilla.github.io/pdf.js/web/viewer.html?file=${encodeURIComponent(e)}#page=1&zoom=page-width&toolbar=0`:`${e}#toolbar=1&view=FitH`}function rt(e){if(!e)return"";const t=e.match(/https?:\/\/(?:drive|docs)\.google\.com\/file\/d\/([^/]+)\//);return t?`https://drive.google.com/file/d/${t[1]}/view?usp=drivesdk`:e}function nt(e){const t=Math.max(0,Math.min(100,parseInt(e??"100",10)));g.vol=t/100,Object.values(u).forEach(r=>{const n=document.getElementById(r.audioId);n&&(n.volume=g.vol)}),i(`volume ${t}%`,"ok",!0);const o=g.last.n?document.getElementById(u[g.last.n].audioId):null;E(g.last.n,o)}function at(e){const t=Math.max(.5,Math.min(2,parseFloat(e??"1")||1));g.rate=t,Object.values(u).forEach(r=>{const n=document.getElementById(r.audioId);n&&(n.playbackRate=g.rate)}),i(`speed ${t.toFixed(2)}x`,"ok",!0);const o=g.last.n?document.getElementById(u[g.last.n].audioId):null;E(g.last.n,o)}function it(e){const t=e?parseInt(e,10):g.last.n||null;if(!t||!u[t])return i("error: nothing to resume","err",!0);const o=g.last.at||0;m(`play ${t} ${$(o|0)}`)}function st(e,t){const o=parseInt(e,10);if(!u[o])return i(`error: unknown work ${e}`,"err",!0);const r=se(t),n=Ae(o,r);navigator.share?navigator.share({title:u[o].title,url:n}).then(()=>i("shared","ok",!0),()=>i(n,"muted",!0)):(navigator.clipboard&&navigator.clipboard.writeText(n),i(n,"ok",!0))}function ct(){const e=Object.values(u).map(r=>document.getElementById(r.audioId)).filter(Boolean);let t=!1;const o=r=>new Promise(n=>{const c=r.volume;r.volume=0;const f=r.src||Te(r.dataset.audio||"");!r.src&&f&&(r.src=f,r.load()),r.play().then(()=>{r.pause(),r.volume=c,n()}).catch(()=>{r.volume=c,n()})});(async()=>{for(const r of e)await o(r),t=!0;i(t?"audio unlocked":"nothing to unlock","ok",!0)})()}function ne(){V("Praetorius – Interactive Portfolio v0.1"),i("Click an action or type a command.","muted",!0),i("Type help for more options","muted",!0),i(" ","muted",!0)}function q(e,t=!1){const o=document.createElement("div");o.className="line cmd-echo",o.innerHTML=`<span class="prompt" style="color:var(--accent);font-weight:700">$</span><span class="sp"></span>${Mt(e)}`,s.appendChild(o),B(o),Y()}function V(e){Me();const t=I("div","line title");t.textContent=e,s.appendChild(t),B(t),Me()}function lt(e,t="",o=10){e.forEach((r,n)=>setTimeout(()=>i(r,t,!0),n*o))}function i(e,t="",o=!1){const r=I("div","line"+(t?" "+t:""));r.textContent=e,s.appendChild(r),o&&B(r),Y()}function Me(){const e=I("div","divider");s.appendChild(e)}function N(e,t,o={}){const r=document.createElement("button");r.type="button";const n=o.className?` ${o.className}`:"";r.className=`btn${n}`,e&&r.setAttribute("data-cmd",e);const c=o.ariaLabel||(e?`${t} (${e})`:t);c&&r.setAttribute("aria-label",c),r.textContent=t;const f=o.dataset||{};return Object.entries(f).forEach(([k,y])=>{y!=null&&(r.dataset[k]=String(y))}),r}function Ee(e,t){const o=I("div","actions");return t!=null&&(o.dataset.workIndex=String(t)),e.forEach(r=>o.appendChild(r)),o}function dt(e,t){const o=I("div","blk");return t!=null&&(o.dataset.workIndex=String(t)),e.forEach(r=>o.appendChild(r)),o}function pt(e,t){const o=Number(e?.id);return Number.isInteger(o)&&o>=1?o:Number.isInteger(t)?t+1:1}function Se(e,t){const o=[ut(t)];return(Array.isArray(e?.cues)?e.cues:[]).forEach(n=>{o.push(ft(n,t))}),o}function ut(e){return N(null,"Play",{className:"js-play",ariaLabel:`Play work ${e}`,dataset:{workIndex:e,seconds:0}})}function ft(e,t){const o={workIndex:t};if(Object.assign(o,mt(e)),o.seconds!=null){const f=Math.max(0,Math.floor(Number(o.seconds)));o.seconds=f}const r=Number(o.seconds),n=Number.isFinite(r)?Math.max(0,r):null,c=typeof e?.label=="string"&&e.label.trim()?e.label.trim():n!=null?`@${$(Math.floor(n))}`:"@0:00";return N(null,`Play ${c}`,{className:"js-playat",ariaLabel:`Play ${c}`,dataset:o})}function mt(e){const t={},o=[e?.t,e?.seconds,e?.at,e?.time];let r="";for(const n of o){if(n==null||n==="")continue;const c=Ce(n);if(Number.isFinite(c))return t.seconds=Math.max(0,Math.floor(c)),t;if(!r){const f=ht(n);f&&(r=f)}}return r&&(t.mmss=r),t}function gt(e){const t=typeof e=="object"&&e!==null?{...e}:{at:e},o=[t.t,t.seconds,t.at,t.time];let r=NaN;for(const n of o)if(r=Ce(n),Number.isFinite(r))break;if(Number.isFinite(r)){const n=Math.max(0,r);t.t=n,t.seconds=n,(!t.label||!String(t.label).trim())&&(t.label=`@${$(Math.floor(n))}`)}return t}function Ce(e){if(e==null||e==="")return NaN;if(typeof e=="number")return Number.isFinite(e)?e:NaN;const t=String(e).trim();if(!t)return NaN;if(/^-?\d+$/.test(t))return Number(t);const o=t.match(/^(-?\d+):([0-5]?\d)$/);if(!o)return NaN;const r=Number(o[1]),n=Number(o[2]);return!Number.isFinite(r)||!Number.isFinite(n)?NaN:r*60+n}function ht(e){if(e==null||e==="")return"";const o=String(e).trim().match(/^(\d+):([0-5]?\d)$/);if(!o)return"";const r=String(Number(o[1])),n=o[2].padStart(2,"0");return`${r}:${n}`}function Ne(e){if(!e)return null;if(e.dataset.workIndex!=null){const o=Number(e.dataset.workIndex);return Number.isInteger(o)&&o>=1?o:(console.warn("Invalid data-work-index on console action",e),null)}const t=e.closest("[data-work-index]");if(t?.dataset?.workIndex!=null){const o=Number(t.dataset.workIndex);return Number.isInteger(o)&&o>=1?o:(console.warn("Invalid data-work-index on console action",t),null)}return console.error("Missing data-work-index on console action",e),null}function wt(e){if(!e)return NaN;const t=e.dataset.seconds;if(t!=null&&t!==""){const r=Number(t);if(Number.isFinite(r))return r}const o=e.dataset.mmss;return o!=null&&o!==""?bt(o):NaN}function bt(e){if(e==null||e==="")return NaN;const o=String(e).trim().match(/^(-?\d+):([0-5]?\d)$/);if(!o)return NaN;const r=Number(o[1]),n=Number(o[2]);return!Number.isFinite(r)||!Number.isFinite(n)?NaN:r*60+n}function xt(e){const t=wt(e);let o=Number.isFinite(t)?t:NaN;(!Number.isFinite(o)||o<0)&&(e.dataset.warnedInvalid||(console.warn("Invalid cue time on Play@ button; defaulting to 0.",e),e.dataset.warnedInvalid="1"),o=0);const r=Math.max(0,Math.floor(o));return e.dataset.seconds=String(r),delete e.dataset.mmss,r}function ae(e){const t=String(e||"").trim();t&&(D=!0,q(t,!0),m(t))}function kt(e){const t=I("div","line"),o=document.createElement("span");return o.style.fontWeight="800",o.textContent=e,t.appendChild(o),t}function vt(e,t){const o=I("div","line "+t);return o.textContent=e,o}function I(e,t){const o=document.createElement(e);return t&&(o.className=t),o}function B(e){requestAnimationFrame(()=>e.classList.add("in"))}function yt(e){e.querySelectorAll(".line, .actions, .blk").forEach(t=>B(t))}function Ie(){s.innerHTML=""}function P(e){if(e==null||e==="")return-1;if(/^\d+$/.test(e))return parseInt(e,10);const t=String(e).match(/^(\d+):([0-5]?\d)$/);return t?parseInt(t[1],10)*60+parseInt(t[2],10):-1}function $(e){e=Math.max(0,Math.floor(e));const t=Math.floor(e/60),o=e%60;return`${t}:${o.toString().padStart(2,"0")}`}function Pe(e){return e?w[e]?w[e]:e:""}function Mt(e){return e.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"})[t])}function Y(e=!1){!D&&!e||(s.scrollTop=s.scrollHeight)}function ie(){a("#works-console").addEventListener("click",()=>l.focus(),{capture:!0}),l.focus()}function $e(){const e=l.value;l.value="",l.value=e}function Le(e){const t=Array.from(document.querySelectorAll("audio"));for(const o of t)if(!(e&&o===e))try{o.pause(),o.currentTime=0}catch{}}function Et(){for(const e of Object.values(u)){const t=document.getElementById(e.audioId);if(t&&!t.paused&&!t.ended)return{n:e.id,audio:t}}return{n:null,audio:null}}function St(e){return/https?:\/\/(drive|docs)\.google\.com\/file\/d\//.test(e)}function Te(e){if(!e)return"";const t=e.match(/https?:\/\/(?:drive|docs)\.google\.com\/file\/d\/([^/]+)\//);return t?`https://drive.google.com/uc?export=download&id=${t[1]}`:e}function Ct(e){if(e.error)return`media error ${e.error.code}`;switch(e.networkState){case e.NETWORK_EMPTY:return"no source";case e.NETWORK_IDLE:return"network idle";case e.NETWORK_LOADING:return"loading";case e.NETWORK_NO_SOURCE:return"no compatible source"}return"unknown"}["keydown","pointerdown","wheel"].forEach(e=>{document.addEventListener(e,()=>D=!0,{once:!0,passive:!0})});const C=document.querySelector("#works-console .wc-hud");C&&C.addEventListener("click",e=>{if(!e.target.closest('button[data-hud="toggle"]'))return;const o=g.last.n;if(!o||!u[o]){i("warn: nothing to control","warn",!0);return}const r=document.getElementById(u[o].audioId);r&&!r.paused?m(`pause ${o}`):m(`resume ${o}`)});let W=null;function Nt(){if(!C)return null;if(W)return W;C.innerHTML="";const e=document.createElement("div");e.className="row";const t=document.createElement("span");t.className="tag tag-now";const o=document.createElement("span");o.className="scroll";const r=document.createElement("span");r.className="txt";const n=document.createElement("span");n.className="dup",n.setAttribute("aria-hidden","true"),o.append(r,n),t.appendChild(o);const c=document.createElement("span");c.className="hud-time";const f=document.createElement("span");f.textContent="|";const k=document.createElement("span");k.className="soft hud-vol";const y=document.createElement("span");y.className="soft hud-speed";const R=document.createElement("div");R.className="meter",R.setAttribute("aria-hidden","true");const Be=document.createElement("span");R.appendChild(Be);const pe=document.createElement("div");pe.className="hud-actions";const H=document.createElement("button");return H.type="button",H.className="btn hud-btn",H.setAttribute("data-hud","toggle"),pe.appendChild(H),e.append(t,c,f,k,y,R,pe),C.appendChild(e),W={tag:t,tagTxt:r,tagDup:n,time:c,vol:k,speed:y,fill:Be,btn:H},requestAnimationFrame(()=>{t.style.width||(t.style.width=t.offsetWidth+"px")}),W}function E(e,t){if(!C)return;const o=Nt();if(!o)return;const n=`Now playing ${e&&u[e]?u[e].title:"—"}`;o.tagTxt.textContent=n,o.tagDup.textContent=" · "+n;const c=o.tagScroll?o.tagScroll.scrollWidth>o.tag.clientWidth+2:o.tag.querySelector(".scroll").scrollWidth>o.tag.clientWidth+2;o.tag.classList.toggle("is-marquee",c);const k=Number.isFinite(t?.duration)?$(t.duration|0):"--:--",y=Number.isFinite(t?.currentTime)?$(t.currentTime|0):"0:00",R=t&&t.duration?Math.max(0,Math.min(100,t.currentTime/t.duration*100)):0;o.time.textContent=`${y} / ${k}`,o.vol.textContent=`vol:${Math.round(g.vol*100)}`,o.speed.textContent=`speed:${g.rate.toFixed(2)}x`,o.fill.style.inset=`0 ${100-R}% 0 0`,o.btn.textContent=t?.paused?"Play ▷":"Pause ❚❚",o.btn.setAttribute("aria-label",`${t?.paused?"Play":"Pause"} current track`)}function It(){C&&(C.innerHTML="",W=null)}function Pt(e){const t=u[e];if(!t)return;const o=document.getElementById(t.audioId);o&&(o.volume=g.vol,o.playbackRate=g.rate,o.dataset.bound||(o.addEventListener("timeupdate",()=>E(e,o),{passive:!0}),o.addEventListener("ratechange",()=>E(e,o),{passive:!0}),o.addEventListener("volumechange",()=>E(e,o),{passive:!0}),o.addEventListener("loadedmetadata",()=>E(e,o),{once:!0,passive:!0}),o.addEventListener("ended",()=>{E(e,o)},{passive:!0}),o.dataset.bound="1"))}function se(e){return/^\d+(:[0-5]?\d)?$/.test(e||"")?P(e):null}function Ae(e,t){const o=`${location.origin}${location.pathname}#work-${e}`;return t?`${o}?t=${t|0}`:o}function $t(e,t){if(!u[e])return i(`error: unknown work ${e}`,"err",!0);const r=se(t),n=Ae(e,r);navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then(()=>i(`copied ${n}`,"ok",!0),()=>i(n,"muted",!0)):i(n,"muted",!0)}function Lt(e,t=2600){let o=a(".toast",s);o||(o=document.createElement("div"),o.className="toast",s.appendChild(o)),o.textContent=e,B(o),T&&clearTimeout(T),T=setTimeout(()=>o.classList.remove("in"),t)}function ze(){const e=location.hash.match(/^#work-(\d+)(?:\?t=(\d+))?$/);if(!e)return;const t=parseInt(e[1],10),o=e[2]?parseInt(e[2],10):null;be(t),Number.isFinite(o)&&m(`play ${t} ${o}`)}window.addEventListener("hashchange",ze,{passive:!0}),ze();const ce=document.getElementById("works-group"),_=document.getElementById("wc-theme-toggle");function le(){try{const e=localStorage.getItem("wc.theme")||"dark";return e.trim().charAt(0)==="{"?(JSON.parse(e)||{}).mode||"dark":e}catch{return"dark"}}function Tt(e){try{localStorage.setItem("wc.theme",e==="light"?"light":"dark")}catch{}}function de(e){const t=e==="light"?"light":e==="dark"?"dark":le();ce.removeAttribute("data-theme-mode"),ce.setAttribute("data-theme",t),_&&(_.setAttribute("title",`Toggle theme (Alt/Opt+D) · current: ${t}`),_.setAttribute("aria-checked",String(t==="dark"))),Tt(t)}function Fe(){const t=(ce.getAttribute("data-theme")||le())==="dark"?"light":"dark";de(t),i(`theme ${t}`,"ok",!0)}function At(e){const t=(e[0]||"").toLowerCase();t==="dark"||t==="light"?(de(t),i(`theme ${t}`,"ok",!0)):i("usage: theme dark|light","muted",!0)}_&&_.addEventListener("click",Fe,{passive:!0}),document.addEventListener("keydown",e=>{(e.altKey||e.metaKey)&&(e.key==="d"||e.key==="D")&&(e.preventDefault(),Fe())},{passive:!1}),de(le());const J=document.querySelector("#works-title .wt-wrap"),Oe=document.getElementById("works-group");function X(){const e=document.querySelector("#works-console .wc-frame");if(!J||!Oe||!e)return;const t=Oe.getBoundingClientRect(),o=e.getBoundingClientRect(),r=Math.max(0,Math.round(o.left-t.left));J.style.marginLeft=r+"px",J.style.marginRight="0",J.style.width=Math.round(o.width)+"px"}function U(e=6){let t=0;const o=()=>{X(),++t<e&&requestAnimationFrame(o)};requestAnimationFrame(o)}window.addEventListener("load",X,{once:!0}),window.addEventListener("resize",X,{passive:!0});try{const e=new ResizeObserver(()=>U(2)),t=document.querySelector("#works-console .wc-split"),o=document.querySelector("#works-console .wc-frame");t&&e.observe(t),o&&e.observe(o)}catch{}})()}document.addEventListener("DOMContentLoaded",ge);const Ue=Object.freeze(Object.defineProperty({__proto__:null,initWorksConsole:ge},Symbol.toStringTag,{value:"Module"}));M.App=fe,M.default=me,M.init=ue,M.mount=K,Object.defineProperties(M,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
